<!doctype html><html lang=ja dir=ltr>
<head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Kubernetesとは #   Dockerコンテナのクラスタ管理を始めとしたオーケストレーションを行うサービスのこと. ホスト間の連携やデプロイについても総括的に管理できる(ここがDocker Composeと違うところ). Kubernetesの大きな特徴の1つに宣言的設定がある. 宣言的設定とは, イミュータブルなインフラを作るための基本的な考え方で, 「システムのあるべき姿」を設定ファイルに宣言する！という考え方. Kubernetesは設定ファイルに書いたとおりのインフラを維持するように設計されている. ので, 設定ファイル(yamlファイル)をたくさん書く事になる. Reference: Docker Compose利用者から見た Kubernetes 開発環境構築入門 GitHubリポジトリ: https://github.com/kubernetes  他のオーケストレーションと違うところ #  ① 様々なOSSと組み合わせることにより, 柔軟に機能拡張なところ.
 コンテナ運用を更に効率化 / 高速化 詳細なメトリック監視と可視化・・・Prometheus + Grafana コンテナのログの転送収集・・・Fluentd / Fluent Bit ネットワークトラフィックの制御・・・ Istio + Envoy Kubernetesの適応領域の拡大 機械学習プラットフォーム・・・Kubeflow 分散ストレージ・・・Rook 分散型データベース・・・Vitess  ② 本格的な宣言的オペレーションとInfrastructure as Codeを実現可能
③ クラスター上にデプロイするシステムの構成をコード(マニフェストファイル)によって定義できる
 運用オペレーションはコードの変更によって実施し, 作業を簡素化する. 複数Kubernetesクラスターでの相互運用を実現する  Reference: Kubernetesの基礎
Docker Composeとの違い #  Docker Composeは動作させるコンテナを意識するだけでほとんど良かったが, Kubernetesではそれに加えて動作させるホスト(Node)やコンテナのグループ化(Pod), その複製(ReplicaSet)と公開(Service, Ingress)といったインフラレベルで意識していたことも全て設定ファイルの1つとして管理できる.">
<meta name=theme-color content="#FFFFFF"><meta property="og:title" content>
<meta property="og:description" content="Kubernetesとは #   Dockerコンテナのクラスタ管理を始めとしたオーケストレーションを行うサービスのこと. ホスト間の連携やデプロイについても総括的に管理できる(ここがDocker Composeと違うところ). Kubernetesの大きな特徴の1つに宣言的設定がある. 宣言的設定とは, イミュータブルなインフラを作るための基本的な考え方で, 「システムのあるべき姿」を設定ファイルに宣言する！という考え方. Kubernetesは設定ファイルに書いたとおりのインフラを維持するように設計されている. ので, 設定ファイル(yamlファイル)をたくさん書く事になる. Reference: Docker Compose利用者から見た Kubernetes 開発環境構築入門 GitHubリポジトリ: https://github.com/kubernetes  他のオーケストレーションと違うところ #  ① 様々なOSSと組み合わせることにより, 柔軟に機能拡張なところ.
 コンテナ運用を更に効率化 / 高速化 詳細なメトリック監視と可視化・・・Prometheus + Grafana コンテナのログの転送収集・・・Fluentd / Fluent Bit ネットワークトラフィックの制御・・・ Istio + Envoy Kubernetesの適応領域の拡大 機械学習プラットフォーム・・・Kubeflow 分散ストレージ・・・Rook 分散型データベース・・・Vitess  ② 本格的な宣言的オペレーションとInfrastructure as Codeを実現可能
③ クラスター上にデプロイするシステムの構成をコード(マニフェストファイル)によって定義できる
 運用オペレーションはコードの変更によって実施し, 作業を簡素化する. 複数Kubernetesクラスターでの相互運用を実現する  Reference: Kubernetesの基礎
Docker Composeとの違い #  Docker Composeは動作させるコンテナを意識するだけでほとんど良かったが, Kubernetesではそれに加えて動作させるホスト(Node)やコンテナのグループ化(Pod), その複製(ReplicaSet)と公開(Service, Ingress)といったインフラレベルで意識していたことも全て設定ファイルの1つとして管理できる.">
<meta property="og:type" content="article">
<meta property="og:url" content="https://solareenlo.com/docs/container/kubernetes/"><meta property="article:section" content="docs">
<meta property="article:modified_time" content="2020-03-20T07:56:42+09:00">
<title>Kubernetes | solareenlo</title>
<link rel=manifest href=/manifest.json>
<link rel=icon href=/favicon.png type=image/x-icon>
<link rel=stylesheet href=/book.min.3fc729a37471ee87e40517478b6ab5936d22fcb6008d40985724e4295d1a74c0.css integrity="sha256-P8cpo3Rx7ofkBRdHi2q1k20i/LYAjUCYVyTkKV0adMA=" crossorigin=anonymous>
<script defer src=/flexsearch.min.js></script>
<script defer src=/ja.search.min.f7cc464663b3b3a097afa2f984b8778e350346674fae4cd69f0f855aaa21c426.js integrity="sha256-98xGRmOzs6CXr6L5hLh3jjUDRmdPrkzWnw+FWqohxCY=" crossorigin=anonymous></script>
</head>
<body dir=ltr>
<input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control>
<main class="container flex">
<aside class=book-menu>
<div class=book-menu-content>
<nav>
<h2 class=book-brand>
<a class="flex align-center" href=/><span>solareenlo</span>
</a>
</h2>
<div class=book-search>
<input type=text id=book-search-input placeholder=検索 aria-label=検索 maxlength=64 data-hotkeys=s/>
<div class="book-search-spinner hidden"></div>
<ul id=book-search-results></ul>
</div>
<ul>
<li>
<a href=/posts/>
Blog
</a>
</li>
</ul>
<ul>
<li>
<input type=checkbox id=section-57e58ca5aae968f4961a4036f314a5de class=toggle>
<label for=section-57e58ca5aae968f4961a4036f314a5de class="flex justify-between">
<a href=https://solareenlo.com/docs/programming/>Programming</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/programming/command/>Command</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/fonts/>Fonts</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/git/>Git</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/github/>Github</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/linter-formatter/>Linter Formatter</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/password-manager/>Password Manager</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/sed/>Sed</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/shell-script/>Shell Script</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/terminal/>Terminal</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/test/>Test</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/tmux/>Tmux</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/vim/>Vim</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/vimium/>Vimium</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/wiki/>Wiki</a>
</li>
<li>
<a href=https://solareenlo.com/docs/programming/hhkb/>HHKB</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-771d1b18af68e81cd9d3d14cd5f6339b class=toggle>
<label for=section-771d1b18af68e81cd9d3d14cd5f6339b class="flex justify-between">
<a href=https://solareenlo.com/docs/pl/>Programming Language</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/pl/angular/>Angular</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/c/>C</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/css/>Css</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/go/>Go</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/haskell/>Haskell</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/hugo/>Hugo</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/javascript/>Javascript</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/nodejs/>Nodejs</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/pl-docs/>Pl Docs</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/react-static/>React Static</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/react/>React</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/rust/>Rust</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/scala/>Scala</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/typescript/>Typescript</a>
</li>
<li>
<a href=https://solareenlo.com/docs/pl/npm/>npm</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-a7bf5468f483fd7222967f135a5003c0 class=toggle>
<label for=section-a7bf5468f483fd7222967f135a5003c0 class="flex justify-between">
<a href=https://solareenlo.com/docs/latex/>LaTeX</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/latex/platex-book/>Platex Book</a>
</li>
<li>
<a href=https://solareenlo.com/docs/latex/zathura-install/>Zathura Install</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-e14f9767e53904cbbdcb3f0bdbe82f2a class=toggle>
<label for=section-e14f9767e53904cbbdcb3f0bdbe82f2a class="flex justify-between">
<a href=https://solareenlo.com/docs/vps/>VPS</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/vps/alpine-linux/>Alpine Linux</a>
</li>
<li>
<a href=https://solareenlo.com/docs/vps/ubuntu/>Ubuntu</a>
</li>
<li>
<a href=https://solareenlo.com/docs/vps/ssh/>SSH</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-99a3d9d52cfe7a0dcbd55cd8c23e4462 class=toggle>
<label for=section-99a3d9d52cfe7a0dcbd55cd8c23e4462 class="flex justify-between">
<a href=https://solareenlo.com/docs/db/>DB</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/db/redis/>Redis</a>
</li>
<li>
<a href=https://solareenlo.com/docs/db/mongodb/>MongoDB</a>
</li>
<li>
<a href=https://solareenlo.com/docs/db/mysql/>MySQL</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-e5a49337b6189bd60f0b5e1d3a4a8539 class=toggle>
<label for=section-e5a49337b6189bd60f0b5e1d3a4a8539 class="flex justify-between">
<a href=https://solareenlo.com/docs/cloud/>Cloud</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/cloud/aws/>Aws</a>
</li>
<li>
<a href=https://solareenlo.com/docs/cloud/firebase/>Firebase</a>
</li>
<li>
<a href=https://solareenlo.com/docs/cloud/gcp/>Gcp</a>
</li>
<li>
<a href=https://solareenlo.com/docs/cloud/sendgrid/>Sendgrid</a>
</li>
<li>
<a href=https://solareenlo.com/docs/cloud/zeit-now/>Zeit Now</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-dfa5c6b6f5f2def7a1fbf289a7570ac2 class=toggle>
<label for=section-dfa5c6b6f5f2def7a1fbf289a7570ac2 class="flex justify-between">
<a href=https://solareenlo.com/docs/ci-cd/>CI/CD</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/ci-cd/circleci/>Circleci</a>
</li>
<li>
<a href=https://solareenlo.com/docs/ci-cd/jenkins/>Jenkins</a>
</li>
<li>
<a href=https://solareenlo.com/docs/ci-cd/travis-ci/>Travis Ci</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-10dd021a58cb696b6cb4f79141ec5ddb class=toggle checked>
<label for=section-10dd021a58cb696b6cb4f79141ec5ddb class="flex justify-between">
<a href=https://solareenlo.com/docs/container/>Conatainer</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/container/docker-compose/>Docker Compose</a>
</li>
<li>
<a href=https://solareenlo.com/docs/container/docker-hub/>Docker Hub</a>
</li>
<li>
<a href=https://solareenlo.com/docs/container/docker1/>Docker1</a>
</li>
<li>
<a href=https://solareenlo.com/docs/container/docker2/>Docker2</a>
</li>
<li>
<a href=https://solareenlo.com/docs/container/kubernetes/ class=active>Kubernetes</a>
</li>
</ul>
</li>
<li>
<input type=checkbox id=section-342a656e10fe011a820c22dda53f7866 class=toggle>
<label for=section-342a656e10fe011a820c22dda53f7866 class="flex justify-between">
<a href=https://solareenlo.com/docs/crypto/>Crypto</a>
</label>
<ul>
<li>
<a href=https://solareenlo.com/docs/crypto/blockchain/>Blockchain</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/crypto-docs/>Crypto Docs</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/ethereum/>Ethereum</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/substrate/>Substrate</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/white-paper/>White Paper</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/bitcoin/>Bitcoin</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/iota/>IOTA</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/nem/>NEM</a>
</li>
<li>
<a href=https://solareenlo.com/docs/crypto/bitcoin-fullnode/>フルノード</a>
</li>
</ul>
</li>
<li>
<a href=https://solareenlo.com/docs/tools/>Tools</a>
<ul>
</ul>
</li>
</ul>
<ul>
<li>
<a href=https://github.com/solareenlo/blog-hugo target=_blank rel=noopener>
Github
</a>
</li>
</ul>
</nav>
<script>(function(){var a=document.querySelector("aside .book-menu-content");addEventListener("beforeunload",function(b){localStorage.setItem("menu.scrollTop",a.scrollTop)}),a.scrollTop=localStorage.getItem("menu.scrollTop")})()</script>
</div>
</aside>
<div class=book-page>
<header class=book-header>
<div class="flex align-center justify-between">
<label for=menu-control>
<img src=/svg/menu.svg class=book-icon alt=Menu>
</label>
<strong>Kubernetes</strong>
<label for=toc-control>
<img src=/svg/toc.svg class=book-icon alt="Table of Contents">
</label>
</div>
<aside class="hidden clearfix">
<nav id=TableOfContents>
<ul>
<li><a href=#kubernetesとは>Kubernetesとは</a>
<ul>
<li><a href=#他のオーケストレーションと違うところ>他のオーケストレーションと違うところ</a></li>
<li><a href=#docker-composeとの違い>Docker Composeとの違い</a></li>
<li><a href=#用語集>用語集</a></li>
<li><a href=#yaml内の用語集>yaml内の用語集</a>
<ul>
<li><a href=#apiversionの調べ方>apiVersionの調べ方</a></li>
<li><a href=#serviceのtype4種類>ServiceのType4種類</a></li>
<li><a href=#persistentvolumeclaimのaccessmodes3種類>PersistentVolumeClaimのaccessModes3種類</a></li>
<li><a href=#storageclassの一覧>StorageClassの一覧</a></li>
<li><a href=#volumemountsのsubpath>volumeMountsのsubPath</a></li>
</ul>
</li>
<li><a href=#macのローカル環境で動かす>Macのローカル環境で動かす</a></li>
<li><a href=#ubuntuのローカル環境で動かす>Ubuntuのローカル環境で動かす</a>
<ul>
<li><a href=#minikubeの使い方><code>minikube</code>の使い方</a></li>
<li><a href=#kubectlの使い方><code>kubectl</code>の使い方</a></li>
<li><a href=#自分のpcからvmにアクセスしてdockerコンテナを見る方法>自分のPCからVMにアクセスしてDockerコンテナを見る方法</a></li>
</ul>
</li>
<li><a href=#1度デプロイしたイメージのバージョンアップ方法>1度デプロイしたイメージのバージョンアップ方法</a></li>
<li><a href=#イメージのバージョンにgitのshaを使う>イメージのバージョンにgitのshaを使う</a></li>
<li><a href=#ローカルで動かした例>ローカルで動かした例</a></li>
<li><a href=#gkeで動かした例>GKEで動かした例</a></li>
<li><a href=#tls>TLS</a></li>
<li><a href=#良書>良書</a></li>
</ul>
</li>
<li><a href=#helm>Helm</a></li>
</ul>
</nav>
</aside>
</header>
<article class=markdown><h1 id=kubernetesとは>
Kubernetesとは
<a class=anchor href=#kubernetes%e3%81%a8%e3%81%af>#</a>
</h1>
<ul>
<li>Dockerコンテナのクラスタ管理を始めとしたオーケストレーションを行うサービスのこと.</li>
<li>ホスト間の連携やデプロイについても総括的に管理できる(ここがDocker Composeと違うところ).</li>
<li>Kubernetesの大きな特徴の1つに宣言的設定がある.</li>
<li>宣言的設定とは, イミュータブルなインフラを作るための基本的な考え方で, 「システムのあるべき姿」を設定ファイルに宣言する！という考え方.</li>
<li>Kubernetesは設定ファイルに書いたとおりのインフラを維持するように設計されている.</li>
<li>ので, 設定ファイル(yamlファイル)をたくさん書く事になる.</li>
<li><strong>Reference:</strong>
<a href=https://speakerdeck.com/kkoudev/introduction-to-kubernetes-for-docker-compose-user>Docker Compose利用者から見た Kubernetes 開発環境構築入門</a></li>
<li><strong>GitHubリポジトリ:</strong>
<a href=https://github.com/kubernetes>https://github.com/kubernetes</a></li>
</ul>
<h2 id=他のオーケストレーションと違うところ>
他のオーケストレーションと違うところ
<a class=anchor href=#%e4%bb%96%e3%81%ae%e3%82%aa%e3%83%bc%e3%82%b1%e3%82%b9%e3%83%88%e3%83%ac%e3%83%bc%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%a8%e9%81%95%e3%81%86%e3%81%a8%e3%81%93%e3%82%8d>#</a>
</h2>
<p>① 様々なOSSと組み合わせることにより, 柔軟に機能拡張なところ.</p>
<ul>
<li>コンテナ運用を更に効率化 / 高速化</li>
<li>詳細なメトリック監視と可視化・・・Prometheus + Grafana</li>
<li>コンテナのログの転送収集・・・Fluentd / Fluent Bit</li>
<li>ネットワークトラフィックの制御・・・ Istio + Envoy</li>
<li>Kubernetesの適応領域の拡大</li>
<li>機械学習プラットフォーム・・・Kubeflow</li>
<li>分散ストレージ・・・Rook</li>
<li>分散型データベース・・・Vitess</li>
</ul>
<p>② 本格的な宣言的オペレーションとInfrastructure as Codeを実現可能</p>
<p>③ クラスター上にデプロイするシステムの構成をコード(マニフェストファイル)によって定義できる</p>
<ul>
<li>運用オペレーションはコードの変更によって実施し, 作業を簡素化する.</li>
<li>複数Kubernetesクラスターでの相互運用を実現する</li>
</ul>
<p><strong>Reference:</strong>
<a href=https://crash.academy/ng/video/731/2060>Kubernetesの基礎</a></p>
<h2 id=docker-composeとの違い>
Docker Composeとの違い
<a class=anchor href=#docker-compose%e3%81%a8%e3%81%ae%e9%81%95%e3%81%84>#</a>
</h2>
<p>Docker Composeは動作させるコンテナを意識するだけでほとんど良かったが, Kubernetesではそれに加えて動作させるホスト(Node)やコンテナのグループ化(Pod), その複製(ReplicaSet)と公開(Service, Ingress)といったインフラレベルで意識していたことも全て設定ファイルの1つとして管理できる.<br>
<strong>Reference:</strong>
<a href=https://speakerdeck.com/kkoudev/introduction-to-kubernetes-for-docker-compose-user>Docker Compose利用者から見た Kubernetes 開発環境構築入門</a></p>
<table>
<thead>
<tr>
<th>項目</th>
<th>Docker Compose</th>
<th>→</th>
<th>Kubernetes</th>
</tr>
</thead>
<tbody>
<tr>
<td>Image</td>
<td>各エントリーは, イメージを構築するためにオプションでdocker-composeを取得できる.</td>
<td>→</td>
<td>すべてのイメージがすでに構築されているとする.</td>
</tr>
<tr>
<td>Container</td>
<td>各エントリーが作成したいコンテナを表す.</td>
<td>→</td>
<td>作成したいオブジェクト(Kubernetesクラスタ上で機能する構成要素のこと. Pod, Service, Volume, Namespace, Controllerのこと.)ごとに1つの設定ファイル</td>
</tr>
<tr>
<td>Network</td>
<td>各エントリーがネットワーク要件を定義する.</td>
<td>→</td>
<td>手動ですべてのネットワークを設定する必要がある.</td>
</tr>
</tbody>
</table>
<h2 id=用語集>
用語集
<a class=anchor href=#%e7%94%a8%e8%aa%9e%e9%9b%86>#</a>
</h2>
<table>
<thead>
<tr>
<th>用語</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>Node</td>
<td>コンテナが動作するサーバのこと.<br><li>Master(Master Node): 全Nodeを管理する.<li>Node(Woker Node): 各リソースを動かす.</td>
</tr>
<tr>
<td>Pod</td>
<td>関連したコンテナの集まりを1つにしたもの.</td>
</tr>
<tr>
<td>ReplicaSet</td>
<td>対象Podのクラスタ全体における生成・管理を行う.<br>PodTemplateと呼ばれるPodのテンプレートをもとに、Podを指定された数(レプリカ数)に調整・管理を行う仕組み.<br>そうすることで, Podのセルフヒーリングを行う.</td>
</tr>
<tr>
<td>Deployment</td>
<td>ReplicaSetの生成・管理を行う.<br>ローリングアップデートやロールバックといったデプロイ管理の仕組みを提供する.</td>
</tr>
<tr>
<td>Service</td>
<td>Podへのアクセス経路を提供する.<br>OSI参照モデルのL4層まで扱える.<br>- クラスタ内部のみで利用できるService(ClusterIP)や,<br>- クラスタ外部からアクセス可能なService(NodePort)などを作成することができる.</td>
</tr>
<tr>
<td>Ingress</td>
<td>Serviceの上位リソース.<br>OSI参照モデルのL7層レベルまで扱える.</td>
</tr>
<tr>
<td>ConfigMap</td>
<td>環境変数のような設定値, また設定ファイル情報そのものを管理する.<br>Key-Value形式.</td>
</tr>
<tr>
<td>Secret</td>
<td>パスワードのような秘匿情報を扱う際に利用する.</td>
</tr>
<tr>
<td>PersistentVolume</td>
<td>ボリューム領域を定義する.<br>EBSやNFSのような外部ストレージも定義できる.</td>
</tr>
<tr>
<td>PersistentVolumeClaim</td>
<td>利用するボリューム領域の要求を定義する.<br>PersistentVolumeとPodを紐付けるために利用する.</td>
</tr>
<tr>
<td>Namespace</td>
<td>仮想的なKubernetesクラスタの分離機能.<br><li><strong>default</strong>: デフォルトのNamespace<li><strong>kube-system</strong>: Kubernetesクラスタのコンポーネントやaddonが展開されるNamespace<li><strong>kube-public</strong>: 全ユーザが利用できるConfigMapなどを配置するNamespace</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>References:</strong></li>
<li>
<a href=https://qiita.com/tkusumi/items/01cd18c59b742eebdc6a>Kubernetes: Deployment の仕組み</a></li>
<li>
<a href=https://speakerdeck.com/kkoudev/introduction-to-kubernetes-for-docker-compose-user>Docker Compose利用者から見た Kubernetes 開発環境構築入門</a></li>
</ul>
<h2 id=yaml内の用語集>
yaml内の用語集
<a class=anchor href=#yaml%e5%86%85%e3%81%ae%e7%94%a8%e8%aa%9e%e9%9b%86>#</a>
</h2>
<table>
<thead>
<tr>
<th>用語</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>apiVersion</td>
<td>リソースで利用するAPIのバージョンを指定.</td>
</tr>
<tr>
<td>kind</td>
<td>リソースの種別を指定.<br>(Deployment, Serviceとか)</td>
</tr>
<tr>
<td>metadata</td>
<td>リソースへ付与可能なメタデータ.<br>主に名称やラベルを付与する.</td>
</tr>
<tr>
<td>spec</td>
<td>リソース固定の設定を指定.</td>
</tr>
<tr>
<td>data</td>
<td>ConfigMapやSecretなどの設定データを記述するリソースで使用される.</td>
</tr>
<tr>
<td>label</td>
<td>Kubernetes上のオブジェクト(Podなど)に付けることができるKey/Valueペアの文字列で, オブジェクトに任意のメタ情報のようなものを持たせることができる.</td>
</tr>
<tr>
<td>selector</td>
<td>Labelの集合をもとにKubernetesオブジェクトをフィルタリングすることができる.</td>
</tr>
</tbody>
</table>
<h3 id=apiversionの調べ方>
apiVersionの調べ方
<a class=anchor href=#apiversion%e3%81%ae%e8%aa%bf%e3%81%b9%e6%96%b9>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl api-resources <span style=color:#586e75># リソースとAPIGROUPの対応を調べる</span>
kubectl api-versions <span style=color:#586e75># APIGROUPで利用可能なversionを調べる</span>
</code></pre></div><table>
<thead>
<tr>
<th>APIGROUPあるなし</th>
<th></th>
<th>書き方</th>
</tr>
</thead>
<tbody>
<tr>
<td>APIGROUPがあるとき</td>
<td>→</td>
<td>apiVersion: (APIGROUP)/(APIVERSION)</td>
</tr>
<tr>
<td>APIGROUPがないとき(= Core groupに属する)</td>
<td>→</td>
<td>apiVersion: v1</td>
</tr>
<tr>
<td><strong>Reference:</strong>
<a href=https://qiita.com/soymsk/items/69aeaa7945fe1f875822>Kubernetesの apiVersion に何を書けばいいか</a></td>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<h3 id=serviceのtype4種類>
ServiceのType4種類
<a class=anchor href=#service%e3%81%aetype4%e7%a8%ae%e9%a1%9e>#</a>
</h3>
<ul>
<li><strong>ClusterIp</strong></li>
<li>クラスタ内のIPにServiceを公開する.</li>
<li>この値ではServiceはクラスタ内からのみアクセス可能.</li>
<li>デフォルトはこれ.</li>
<li><strong>NodePort</strong></li>
<li>各ノードのIP上のServiceを静的ポート(NordPort)に公開する.</li>
<li>NodePort ServiceがルーティングするClusterIP Serviceが自動的に作成される.</li>
<li><code>NodeIp: NordPort</code>を要求することで, クラスタ外からNordPort Serviceにアクセスできる.</li>
<li><strong>LoadBalancer</strong></li>
<li>クラウドプロバイダのロードバランサを使用して外部にServiceを公開する.</li>
<li>外部ロードバランサがルーティングするNordPort ServiceとClusterIP Serviceが自動的に作成される.</li>
<li><strong>ExternalName</strong></li>
<li>値を含むCNAMEレコードを返すことにより, ServiceをexternalNameフィールドのコンテンツ(たとえば, foo.bar.example.com)にマッピングする.</li>
<li>この場合, どのような種類のプロキシも設定されない.</li>
<li>この型を使うには, バージョン1.7以上のkube-dnsが必要.</li>
</ul>
<p><strong>Reference:</strong>
<a href=https://qiita.com/kouares/items/94a073baed9dffe86ea0>Kubernetesの Service についてまとめてみた</a></p>
<h3 id=persistentvolumeclaimのaccessmodes3種類>
PersistentVolumeClaimのaccessModes3種類
<a class=anchor href=#persistentvolumeclaim%e3%81%aeaccessmodes3%e7%a8%ae%e9%a1%9e>#</a>
</h3>
<ul>
<li><strong>PeadWriteOnce</strong></li>
<li>1つのノードが読み書き可能</li>
<li><strong>ReadOnlyMany</strong></li>
<li>複数のノードが読み込みだけ可能</li>
<li><strong>ReadWriteMany</strong></li>
<li>複数のノードから読み書き可能</li>
</ul>
<h3 id=storageclassの一覧>
StorageClassの一覧
<a class=anchor href=#storageclass%e3%81%ae%e4%b8%80%e8%a6%a7>#</a>
</h3>
<ul>
<li>
<a href=https://kubernetes.io/docs/concepts/storage/storage-classes/#the-storageclass-resource>The StorageClass Resource</a></li>
</ul>
<h3 id=volumemountsのsubpath>
volumeMountsのsubPath
<a class=anchor href=#volumemounts%e3%81%aesubpath>#</a>
</h3>
<p><code>subPath</code>を指定してあげると<code>volume</code>をルートディレクトリからマウントしないで, サブディレクトリからマウントする.
<code>volume</code>をそんなに使わない時にオススメ.</p>
<p><strong>Reference:</strong>
<a href=https://qiita.com/MahoTakara/items/fbe5ffb9fd9b9d35ddbe>永続ストレージのサブディレクトリにマウントする方法</a></p>
<h2 id=macのローカル環境で動かす>
Macのローカル環境で動かす
<a class=anchor href=#mac%e3%81%ae%e3%83%ad%e3%83%bc%e3%82%ab%e3%83%ab%e7%92%b0%e5%a2%83%e3%81%a7%e5%8b%95%e3%81%8b%e3%81%99>#</a>
</h2>
<ol>
<li>
<a href=https://brew.sh>https://brew.sh</a> からbrewをインストールする.</li>
</ol>
<ul>
<li>
<p><code>brew install kubernetes-cli</code>をターミナルで実行する.</p>
<ul>
<li><code>kubectl</code>はKubernetesのmasterを動かすもの.</li>
</ul>
</li>
<li>
<p>
<a href=https://www.virtualbox.org>https://www.virtualbox.org</a> からMac用のVirtualBoxをインストールする.</p>
<ul>
<li>VirtualBoxはコンテナ群を動かす環境.</li>
</ul>
</li>
<li>
<p><code>brew cask install minikube</code>をターミナルで実行する.</p>
<ul>
<li><code>minikube</code>はコンテナをVM上で動かすもの.</li>
</ul>
</li>
<li>
<p><code>minikube start</code>をターミナルで実行する.</p>
</li>
<li>
<p><strong>References:</strong></p>
</li>
<li>
<p>
<a href=https://kubernetes.io/docs/tasks/tools/install-kubectl/>https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></p>
</li>
<li>
<p>
<a href=https://www.virtualbox.org/wiki/Downloads>https://www.virtualbox.org/wiki/Downloads</a></p>
</li>
<li>
<p>
<a href=https://kubernetes.io/docs/tasks/tools/install-minikube/>https://kubernetes.io/docs/tasks/tools/install-minikube/</a></p>
</li>
</ul>
<h2 id=ubuntuのローカル環境で動かす>
Ubuntuのローカル環境で動かす
<a class=anchor href=#ubuntu%e3%81%ae%e3%83%ad%e3%83%bc%e3%82%ab%e3%83%ab%e7%92%b0%e5%a2%83%e3%81%a7%e5%8b%95%e3%81%8b%e3%81%99>#</a>
</h2>
<ol>
<li><code>kubectl</code>をインストールする.</li>
</ol>
<ul>
<li>
<p>VirtualBoxをインストールする.</p>
</li>
<li>
<p><code>minikube</code>をインストールする.</p>
</li>
<li>
<p><strong>References:</strong></p>
</li>
<li>
<p>
<a href=https://kubernetes.io/docs/tasks/tools/install-kubectl/>https://kubernetes.io/docs/tasks/tools/install-kubectl/</a></p>
</li>
<li>
<p>
<a href=https://www.virtualbox.org/wiki/Downloads>https://www.virtualbox.org/wiki/Downloads</a></p>
</li>
<li>
<p>
<a href=https://kubernetes.io/docs/tasks/tools/install-minikube/>https://kubernetes.io/docs/tasks/tools/install-minikube/</a></p>
</li>
</ul>
<h3 id=minikubeの使い方>
<code>minikube</code>の使い方
<a class=anchor href=#minikube%e3%81%ae%e4%bd%bf%e3%81%84%e6%96%b9>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>minikube status <span style=color:#586e75># 動いているか確認</span>
minikube start <span style=color:#586e75># minikubeをスタート</span>
minikube ip <span style=color:#586e75># ipを確認</span>
minikube dashboard <span style=color:#586e75># ダッシュボード出現</span>
minikube docker-env <span style=color:#586e75># 環境変数を出力</span>
</code></pre></div><h3 id=kubectlの使い方>
<code>kubectl</code>の使い方
<a class=anchor href=#kubectl%e3%81%ae%e4%bd%bf%e3%81%84%e6%96%b9>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl apply -f client-pod.yaml <span style=color:#586e75># オブジェクトの新規作成・差分反映</span>
kubectl get pods <span style=color:#586e75># 動いているpodを確認</span>
kubectl get deployments <span style=color:#586e75># 動いているdeploymentを確認</span>
kubectl describe &lt;object type&gt; &lt;object name&gt; <span style=color:#586e75># オブジェクトの詳細表示</span>
kubectl delete -f client-pod.yaml <span style=color:#586e75># オブジェクトが存在すれば削除</span>
kubectl delete deployment client-deployment <span style=color:#586e75># deploymentの削除</span>
kubectl delete pod client-node-port <span style=color:#586e75># podの削除</span>
kubectl api-resources <span style=color:#586e75># リソースとAPIGROUPの対応を調べる</span>
kubectl api-versions <span style=color:#586e75># APIGROUPで利用可能なversionを調べる</span>
kubectl get storageclass <span style=color:#586e75># 管理者が提供するストレージのクラスを表示</span>
kubectl get pv <span style=color:#586e75># PersistentVolumeの一覧を表示</span>
kubectl get pvc <span style=color:#586e75># PersistentVolumeClaimの一覧を表示</span>
<span style=color:#586e75># 以下3つはパスワードを設定する時に使用</span>
kubectl create secret generic pgpassword --from-literal <span style=color:#268bd2>PGPASSWORD</span><span style=color:#719e07>=</span>******** <span style=color:#586e75># パスワードを生成</span>
kubectl create secret generic &lt;secret_name&gt; --from-literal &lt;<span style=color:#268bd2>key</span><span style=color:#719e07>=</span>value&gt; <span style=color:#586e75># パスワードを生成</span>
kubectl get secret <span style=color:#586e75># secret一覧を表示</span>
<span style=color:#586e75># 以下2つはGKEでユーザーの権限を与える時に使用</span>
kubectl create serviceaccount --namespace kube-system tiller <span style=color:#586e75># tillerというサービスアカウントを作成</span>
kubectl create clusterrolebinding tiller-cluster-rule --clusterrole<span style=color:#719e07>=</span>cluster-ad
min --serviceaccount<span style=color:#719e07>=</span>kube-system:tiller
</code></pre></div><h3 id=自分のpcからvmにアクセスしてdockerコンテナを見る方法>
自分のPCからVMにアクセスしてDockerコンテナを見る方法
<a class=anchor href=#%e8%87%aa%e5%88%86%e3%81%aepc%e3%81%8b%e3%82%89vm%e3%81%ab%e3%82%a2%e3%82%af%e3%82%bb%e3%82%b9%e3%81%97%e3%81%a6docker%e3%82%b3%e3%83%b3%e3%83%86%e3%83%8a%e3%82%92%e8%a6%8b%e3%82%8b%e6%96%b9%e6%b3%95>#</a>
</h3>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#b58900>eval</span> <span style=color:#719e07>$(</span>minikube docker-env<span style=color:#719e07>)</span>
docker ps
</code></pre></div><h2 id=1度デプロイしたイメージのバージョンアップ方法>
1度デプロイしたイメージのバージョンアップ方法
<a class=anchor href=#1%e5%ba%a6%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%81%97%e3%81%9f%e3%82%a4%e3%83%a1%e3%83%bc%e3%82%b8%e3%81%ae%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3%e3%82%a2%e3%83%83%e3%83%97%e6%96%b9%e6%b3%95>#</a>
</h2>
<p>Kubernetesでは<code>latest</code>タグイメージの運用は適切なロールバックを行うことが難しいので推奨されていない.<br>
ので, できる限り<code>Vsersion</code>, もしくは<code>digest</code>でイメージ指定を行うようにする.</p>
<p>以下のようにDocker Hubにバージョンを指定してpushし,</p>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker build -t solareenlo/multi-client:v5
docker push solareenlo/multi-client:v5
</code></pre></div><p>以下のようにコマンドラインからイメージのバージョンアップを行う.</p>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kubectl <span style=color:#b58900>set</span> image deployment/client-deployment <span style=color:#268bd2>client</span><span style=color:#719e07>=</span>solareenlo/multi-client:v5
</code></pre></div><h2 id=イメージのバージョンにgitのshaを使う>
イメージのバージョンにgitのshaを使う
<a class=anchor href=#%e3%82%a4%e3%83%a1%e3%83%bc%e3%82%b8%e3%81%ae%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3%e3%81%abgit%e3%81%aesha%e3%82%92%e4%bd%bf%e3%81%86>#</a>
</h2>
<p>以下の様に<code>.travis.yml</code>に<code>$SHA</code>を設定して,</p>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#268bd2>sudo</span>: required
<span style=color:#268bd2>services</span>:
  - docker
<span style=color:#268bd2>env</span>:
  <span style=color:#268bd2>global</span>:
    - SHA=$(git rev-parse HEAD)
</code></pre></div><p>以下の様に<code>build</code>, <code>push</code>, <code>set</code>を行うと良い.</p>
<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker build -t solareenlo/multi-client:latest -t solareenlo/multi-client:<span style=color:#268bd2>$SHA</span> -f ./client/Dockerfile ./client
docker build -t solareenlo/multi-server:latest -t solareenlo/multi-server:<span style=color:#268bd2>$SHA</span> -f ./server/Dockerfile ./server
docker build -t solareenlo/multi-worker:latest -t solareenlo/multi-worker:<span style=color:#268bd2>$SHA</span> -f ./worker/Dockerfile ./worker

docker push solareenlo/multi-client:latest
docker push solareenlo/multi-server:latest
docker push solareenlo/multi-worker:latest

docker push solareenlo/multi-client:<span style=color:#268bd2>$SHA</span>
docker push solareenlo/multi-server:<span style=color:#268bd2>$SHA</span>
docker push solareenlo/multi-worker:<span style=color:#268bd2>$SHA</span>

kubectl apply -f k8s
kubectl <span style=color:#b58900>set</span> image solareenlo/server-deployment <span style=color:#268bd2>server</span><span style=color:#719e07>=</span>solareenlo/multi-server:<span style=color:#268bd2>$SHA</span>
kubectl <span style=color:#b58900>set</span> image solareenlo/client-deployment <span style=color:#268bd2>client</span><span style=color:#719e07>=</span>solareenlo/multi-client:<span style=color:#268bd2>$SHA</span>
kubectl <span style=color:#b58900>set</span> image solareenlo/worker-deployment <span style=color:#268bd2>worker</span><span style=color:#719e07>=</span>solareenlo/multi-worker:<span style=color:#268bd2>$SHA</span>
</code></pre></div><h2 id=ローカルで動かした例>
ローカルで動かした例
<a class=anchor href=#%e3%83%ad%e3%83%bc%e3%82%ab%e3%83%ab%e3%81%a7%e5%8b%95%e3%81%8b%e3%81%97%e3%81%9f%e4%be%8b>#</a>
</h2>
<ul>
<li>
<a href=https://github.com/solareenlo/complex-k8s-local>solareenlo/complex-k8s-local</a></li>
</ul>
<h2 id=gkeで動かした例>
GKEで動かした例
<a class=anchor href=#gke%e3%81%a7%e5%8b%95%e3%81%8b%e3%81%97%e3%81%9f%e4%be%8b>#</a>
</h2>
<ul>
<li>
<a href=https://github.com/solareenlo/multi-k8s-gke>solareenlo/multi-k8s-gke</a></li>
</ul>
<h2 id=tls>
TLS
<a class=anchor href=#tls>#</a>
</h2>
<ul>
<li>
<a href=https://github.com/jetstack/cert-manager>jetstack/cert-manager</a></li>
</ul>
<h2 id=良書>
良書
<a class=anchor href=#%e8%89%af%e6%9b%b8>#</a>
</h2>
<ul>
<li>
<a href=https://pages.cloud.vmware.com/cloud-native-infrastructure-ebook>Cloud Native Infrastructure</a></li>
<li>
<a href=https://pages.cloud.vmware.com/kubernetes-up-and-running-ebook>Kubernetes Up & Running</a></li>
<li>
<a href=https://pages.cloud.vmware.com/managing-kubernetes-ebook>Managing Kubernetes</a></li>
</ul>
<h1 id=helm>
Helm
<a class=anchor href=#helm>#</a>
</h1>
<ul>
<li>Kubernetesのパッケージ管理ツール.</li>
<li>デフォルトで使用可能なChartは<code>kubernetes/charts</code>の<code>stable</code>ディレクトリで確認可能.</li>
<li><strong>GitHubリポジトリ:</strong>
<a href=https://github.com/helm/helm>https://github.com/helm/helm</a></li>
</ul>
<table>
<thead>
<tr>
<th>用語</th>
<th>意味</th>
<th>役割</th>
</tr>
</thead>
<tbody>
<tr>
<td>helm</td>
<td>船のかじ</td>
<td>Kubernetesのパッケージマネージャー.</td>
</tr>
<tr>
<td>chart</td>
<td>海図</td>
<td>Kubernetesのマニフェストのテンプレートをまとめたもの.</td>
</tr>
<tr>
<td>tiller</td>
<td>舵柄</td>
<td>デプロイを担うサーバーコンポーネント.</td>
</tr>
<tr>
<td>package</td>
<td>-</td>
<td>1つのアプリケーションとして成り立つchartの単位.<br>この単位でデプロイを行う.</td>
</tr>
<tr>
<td>release</td>
<td>-</td>
<td>packageがデプロイされて, k8s上でpodとして実際に動作しているもの.</td>
</tr>
<tr>
<td>repository</td>
<td>-</td>
<td>chartの置き場所. yumのリポジトリのようなイメージ.</td>
</tr>
</tbody>
</table>
<ul>
<li><strong>Reference:</strong></li>
<li>
<a href=https://qiita.com/tkusumi/items/12857780d8c8463f9b9c>Kubernetes: パッケージマネージャHelm</a></li>
<li>
<a href=https://y-ohgi.hatenablog.com/entry/2018/05/21/010839>helm覚書</a></li>
<li>
<a href=https://qiita.com/Ladicle/items/63cad824e27aa8aac7e1#%e6%a7%8b%e6%88%90%e3%81%a8%e9%80%9a%e4%bf%a1%e6%96%b9%e6%b3%95>helmの過去、現在、未来</a></li>
<li>
<a href=https://qiita.com/thinksphere/items/5f3e918015cf4e63a0bc>Helmの概要とChart(チャート)の作り方</a></li>
</ul>
</article>
<footer class=book-footer>
<div class="flex flex-wrap justify-between">
<div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/commit/bea798d93c9116bad5b5ceb26ca3159b372095e9 title="最終更新者 solareenlo | Mar 20, 2020" target=_blank rel=noopener>
<img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Mar 20, 2020</span>
</a>
</div>
<div>
<a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/edit/main/content/docs/container/kubernetes.md target=_blank rel=noopener>
<img src=/svg/edit.svg class=book-icon alt=Edit>
<span>このページを編集する</span>
</a>
</div>
</div>
<script>(function(){function a(c){const a=window.getSelection(),b=document.createRange();b.selectNodeContents(c),a.removeAllRanges(),a.addRange(b)}document.querySelectorAll("pre code").forEach(b=>{b.addEventListener("click",function(c){a(b.parentElement),navigator.clipboard&&navigator.clipboard.writeText(b.parentElement.textContent)})})})()</script>
</footer>
<div class=book-comments>
</div>
<label for=menu-control class="hidden book-menu-overlay"></label>
</div>
<aside class=book-toc>
<div class=book-toc-content>
<nav id=TableOfContents>
<ul>
<li><a href=#kubernetesとは>Kubernetesとは</a>
<ul>
<li><a href=#他のオーケストレーションと違うところ>他のオーケストレーションと違うところ</a></li>
<li><a href=#docker-composeとの違い>Docker Composeとの違い</a></li>
<li><a href=#用語集>用語集</a></li>
<li><a href=#yaml内の用語集>yaml内の用語集</a>
<ul>
<li><a href=#apiversionの調べ方>apiVersionの調べ方</a></li>
<li><a href=#serviceのtype4種類>ServiceのType4種類</a></li>
<li><a href=#persistentvolumeclaimのaccessmodes3種類>PersistentVolumeClaimのaccessModes3種類</a></li>
<li><a href=#storageclassの一覧>StorageClassの一覧</a></li>
<li><a href=#volumemountsのsubpath>volumeMountsのsubPath</a></li>
</ul>
</li>
<li><a href=#macのローカル環境で動かす>Macのローカル環境で動かす</a></li>
<li><a href=#ubuntuのローカル環境で動かす>Ubuntuのローカル環境で動かす</a>
<ul>
<li><a href=#minikubeの使い方><code>minikube</code>の使い方</a></li>
<li><a href=#kubectlの使い方><code>kubectl</code>の使い方</a></li>
<li><a href=#自分のpcからvmにアクセスしてdockerコンテナを見る方法>自分のPCからVMにアクセスしてDockerコンテナを見る方法</a></li>
</ul>
</li>
<li><a href=#1度デプロイしたイメージのバージョンアップ方法>1度デプロイしたイメージのバージョンアップ方法</a></li>
<li><a href=#イメージのバージョンにgitのshaを使う>イメージのバージョンにgitのshaを使う</a></li>
<li><a href=#ローカルで動かした例>ローカルで動かした例</a></li>
<li><a href=#gkeで動かした例>GKEで動かした例</a></li>
<li><a href=#tls>TLS</a></li>
<li><a href=#良書>良書</a></li>
</ul>
</li>
<li><a href=#helm>Helm</a></li>
</ul>
</nav>
</div>
</aside>
</main>
</body>
</html>