<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Node.jsとは  サーバーサイドJavaScript環境のこと. サーバーサイドもJavaScripで記述できるようにした. シングルスレッドでノンブロッキングI/Oを行う. GitHubリポジトリ: https://github.com/nodejs  インストール Mac: https://nodejs.org/en/
Ubuntu: Official Node.js binary distributions
テストツールの種類  テストの環境を提供する（ Mocha, Jasmine, Jest, Karma）   テストの構造を提供する（ Mocha, Jasmine, Jest, Cucumber） アサーション機能を提供する（ Chai, Jasmine, Jest, Unexpected） 生成, 表示, テスト結果をウォッチする（ Mocha, Jasmine, Jest, Karma）
以前の実行時からの変更が意図されたものであることを確認するために, コンポーネントやデータ構造を生成し, スナップショットを比較する（ Jest, Ava） モック, スパイ, スタブを提供する（ Sinon, Jasmine, enzyme, Jest, testdouble) コードカバレッジのレポートを生成する（Istanbul, Jest) シナリオ実行の管理ができるブラウザ, または疑似ブラウザの環境を提供する（ Protractor, Nightwatch, Phantom, Casper）  Reference: 2017年JavaScriptのテスト概論
日付を扱う   moment/moment  iamkun/dayjs  date-fns/date-fns  引数で判定 引数1つでok."><meta property="og:title" content="" />
<meta property="og:description" content="Node.jsとは  サーバーサイドJavaScript環境のこと. サーバーサイドもJavaScripで記述できるようにした. シングルスレッドでノンブロッキングI/Oを行う. GitHubリポジトリ: https://github.com/nodejs  インストール Mac: https://nodejs.org/en/
Ubuntu: Official Node.js binary distributions
テストツールの種類  テストの環境を提供する（ Mocha, Jasmine, Jest, Karma）   テストの構造を提供する（ Mocha, Jasmine, Jest, Cucumber） アサーション機能を提供する（ Chai, Jasmine, Jest, Unexpected） 生成, 表示, テスト結果をウォッチする（ Mocha, Jasmine, Jest, Karma）
以前の実行時からの変更が意図されたものであることを確認するために, コンポーネントやデータ構造を生成し, スナップショットを比較する（ Jest, Ava） モック, スパイ, スタブを提供する（ Sinon, Jasmine, enzyme, Jest, testdouble) コードカバレッジのレポートを生成する（Istanbul, Jest) シナリオ実行の管理ができるブラウザ, または疑似ブラウザの環境を提供する（ Protractor, Nightwatch, Phantom, Casper）  Reference: 2017年JavaScriptのテスト概論
日付を扱う   moment/moment  iamkun/dayjs  date-fns/date-fns  引数で判定 引数1つでok." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://solareenlo.com/docs/pl/nodejs/" />
<meta property="article:modified_time" content="2020-03-20T07:56:42+09:00" />
<title>Nodejs | solareenlo</title>
<link rel="icon" href="/favicon.png" type="image/x-icon">


<link rel="stylesheet" href="/book.min.5fa1289292eb5e3222d2349e8d9deaae01ee5d99834b1dc07cee7554c8837bdb.css" integrity="sha256-X6EokpLrXjIi0jSejZ3qrgHuXZmDSx3AfO51VMiDe9s=">


<script defer src="/en.search.min.e32c48171202d6bbbaf63dd5854b91e8437283aac5934e443a396e4419106a4e.js" integrity="sha256-4yxIFxIC1ru69j3VhUuR6ENyg6rFk05EOjluRBkQak4="></script>

<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" class="hidden" id="menu-control" />
  <main class="container flex">
    <aside class="book-menu">
      
  <nav>
<h2 class="book-brand">
  <a href="/"><span>solareenlo</span>
  </a>
</h2>


<div class="book-search">
  <input type="text" id="book-search-input" placeholder="Search" aria-label="Search" maxlength="64" data-hotkeys="s/" />
  <div class="book-search-spinner spinner hidden"></div>
  <ul id="book-search-results"></ul>
</div>






  
<ul>
  
  <li>
    <a href="/posts/" >
        Blog
      </a>
  </li>
  
</ul>







  

  
  





 
  
    




  
  <ul>
    
      
        

  <li>
    

  
  <a href="/docs/programming/" class="collapsed ">Programming</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/pl/" class="collapsed ">Programming Language</a>
  


    




  
  <ul>
    
      
        <li>

  
  <a href="/docs/pl/angular/" class="">Angular</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/c/" class="">C</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/css/" class="">Css</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/haskell/" class="">Haskell</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/hugo/" class="">Hugo</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/javascript/" class="">Javascript</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/nodejs/" class="active">Nodejs</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/npm/" class="">Npm</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/pl-docs/" class="">Pl Docs</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/react-static/" class="">React Static</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/react/" class="">React</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/rust/" class="">Rust</a>
  

</li>
      
    
      
        <li>

  
  <a href="/docs/pl/typescript/" class="">Typescript</a>
  

</li>
      
    
  </ul>
  



  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/latex/" class="collapsed ">LaTeX</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/vps/" class="collapsed ">VPS</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/db/" class="collapsed ">DB</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/cloud/" class="collapsed ">Cloud</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/ci-cd/" class="collapsed ">CI/CD</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/container/" class="collapsed ">Conatainer</a>
  


    






  </li>


      
    
      
        

  <li>
    

  
  <a href="/docs/crypto/" class="collapsed ">Crypto</a>
  


    






  </li>


      
    
  </ul>
  



  












  
<ul>
  
  <li>
    <a href="https://github.com/solareenlo/" target="_blank" rel="noopener">
        Github
      </a>
  </li>
  
  <li>
    <a href="https://twitter.com/solareenlo/" target="_blank" rel="noopener">
        Twitter
      </a>
  </li>
  
</ul>






</nav>




  <script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script>


 
    </aside>

    <div class="book-page">
      <header class="book-header">
        
  <div class="flex align-center justify-between">
  <label for="menu-control">
    <img src="/svg/menu.svg" class="book-icon" alt="Menu" />
  </label>

  <strong>Nodejs</strong>

  <label for="toc-control">
    <img src="/svg/toc.svg" class="book-icon" alt="Table of Contents" />
  </label>
</div>


  
    <input type="checkbox" class="hidden" id="toc-control" />
    <aside class="hidden clearfix">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#nodejsとは">Node.jsとは</a>
      <ul>
        <li><a href="#インストール">インストール</a></li>
        <li><a href="#テストツールの種類">テストツールの種類</a></li>
        <li><a href="#日付を扱う">日付を扱う</a></li>
        <li><a href="#引数で判定">引数で判定</a></li>
        <li><a href="#mapの中で非同期処理">mapの中で非同期処理</a></li>
        <li><a href="#csvを扱う">CSVを扱う</a>
          <ul>
            <li><a href="#stream">stream</a></li>
            <li><a href="#pipeでstream">pipeでstream</a></li>
            <li><a href="#コールバック">コールバック</a></li>
            <li><a href="#同期処理">同期処理</a></li>
          </ul>
        </li>
        <li><a href="#streamとは">Streamとは</a>
          <ul>
            <li><a href="#streamの種類">Streamの種類</a></li>
            <li><a href="#公式reference">公式Reference</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#yarn">yarn</a>
      <ul>
        <li><a href="#パッケージを最新バージョンへ">パッケージを最新バージョンへ</a></li>
      </ul>
    </li>
  </ul>
</nav>


    </aside>
  
 
      </header>

      
      
  <article class="markdown"><h1 id="nodejsとは">Node.jsとは</h1>
<ul>
<li>サーバーサイドJavaScript環境のこと.</li>
<li>サーバーサイドもJavaScripで記述できるようにした.</li>
<li>シングルスレッドでノンブロッキングI/Oを行う.</li>
<li><strong>GitHubリポジトリ:</strong> <a href="https://github.com/nodejs">https://github.com/nodejs</a></li>
</ul>
<h2 id="インストール">インストール</h2>
<p><strong>Mac:</strong> <a href="https://nodejs.org/en/">https://nodejs.org/en/</a></p>
<p><strong>Ubuntu:</strong> 
  <a href="https://github.com/nodesource/distributions/blob/master/README.md">Official Node.js binary distributions</a></p>
<h2 id="テストツールの種類">テストツールの種類</h2>
<ol>
<li>テストの環境を提供する（
  <a href="https://github.com/mochajs/mocha">Mocha</a>, 
  <a href="https://github.com/jasmine/jasmine">Jasmine</a>, 
  <a href="https://github.com/facebook/jest">Jest</a>, 
  <a href="https://github.com/karma-runner/karma">Karma</a>）</li>
</ol>
<ul>
<li>テストの構造を提供する（
  <a href="https://github.com/mochajs/mocha">Mocha</a>, 
  <a href="https://github.com/jasmine/jasmine">Jasmine</a>, 
  <a href="https://github.com/facebook/jest">Jest</a>, Cucumber）</li>
<li>アサーション機能を提供する（
  <a href="https://github.com/chaijs/chai">Chai</a>, 
  <a href="https://github.com/jasmine/jasmine">Jasmine</a>, 
  <a href="https://github.com/facebook/jest">Jest</a>, Unexpected）</li>
<li>生成, 表示, テスト結果をウォッチする（
  <a href="https://github.com/mochajs/mocha">Mocha</a>, 
  <a href="https://github.com/jasmine/jasmine">Jasmine</a>, 
  <a href="https://github.com/facebook/jest">Jest</a>, 
  <a href="https://github.com/karma-runner/karma">Karma</a>）<br>
以前の実行時からの変更が意図されたものであることを確認するために,</li>
<li>コンポーネントやデータ構造を生成し, スナップショットを比較する（
  <a href="https://github.com/facebook/jest">Jest</a>, 
  <a href="https://github.com/avajs/ava">Ava</a>）</li>
<li>モック, スパイ, スタブを提供する（
  <a href="https://github.com/sinonjs/sinon">Sinon</a>, 
  <a href="https://github.com/jasmine/jasmine">Jasmine</a>, 
  <a href="https://github.com/airbnb/enzyme">enzyme</a>, 
  <a href="https://github.com/facebook/jest">Jest</a>, testdouble)</li>
<li>コードカバレッジのレポートを生成する（Istanbul, 
  <a href="https://github.com/facebook/jest">Jest</a>)</li>
<li>シナリオ実行の管理ができるブラウザ, または疑似ブラウザの環境を提供する（
  <a href="https://github.com/angular/protractor">Protractor</a>, 
  <a href="https://github.com/nightwatchjs/nightwatch">Nightwatch</a>, Phantom, Casper）</li>
</ul>
<p><strong>Reference:</strong> 
  <a href="https://postd.cc/a-complete-guide-to-testing-javascript-in-2017/">2017年JavaScriptのテスト概論</a></p>
<h2 id="日付を扱う">日付を扱う</h2>
<ul>
<li>
  <a href="https://github.com/moment/moment">moment/moment</a></li>
<li>
  <a href="https://github.com/iamkun/dayjs">iamkun/dayjs</a></li>
<li>
  <a href="https://github.com/date-fns/date-fns">date-fns/date-fns</a></li>
</ul>
<h2 id="引数で判定">引数で判定</h2>
<p>引数1つでok. それ以外は強制終了する.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#719e07">if</span>(process.argv.length <span style="color:#719e07">!==</span> <span style="color:#2aa198">3</span>) {
  console.log(<span style="color:#586e75">`csvファイル名を入力してください.`</span>);
  process.exit(<span style="color:#2aa198">1</span>); <span style="color:#586e75">// 正常に強制終了する
</span><span style="color:#586e75"></span>}
</code></pre></div><h2 id="mapの中で非同期処理">mapの中で非同期処理</h2>
<ul>
<li>
  <a href="https://t-kojima.github.io/2018/07/18/0028-async-await-in-loop/">Node 高階関数内での非同期処理（async/await）をどう書くか</a></li>
<li>
  <a href="https://qiita.com/toniov/items/127267fb64a960e8166e">async/awaitやPromiseで簡単に配列のイテレーションできるようにする</a></li>
<li>
  <a href="https://github.com/toniov/p-iteration">toniov/p-iteration</a></li>
</ul>
<h2 id="csvを扱う">CSVを扱う</h2>
<ul>
<li>
  <a href="https://csv.js.org">csv.js</a>を使えば簡単.</li>
<li>CSVの生成/読み取り/変換/書き出しができる.</li>
<li>stream/コールバック/同期的にデータを処理ができる.</li>
</ul>
<h3 id="stream">stream</h3>
<p>以下を行ってから</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm init -y
npm i --save csv
touch index.js
</code></pre></div><p><code>index.js</code>に以下を書き込んで</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">const</span> csv <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv&#39;</span>);

<span style="color:#268bd2">const</span> generator <span style="color:#719e07">=</span> csv.generate({seed<span style="color:#719e07">:</span> <span style="color:#2aa198">1</span>, columns<span style="color:#719e07">:</span> <span style="color:#2aa198">2</span>, length<span style="color:#719e07">:</span> <span style="color:#2aa198">3</span>});
<span style="color:#268bd2">const</span> parser <span style="color:#719e07">=</span> csv.parse();
<span style="color:#268bd2">const</span> transformer <span style="color:#719e07">=</span> csv.transform(data =&gt; {
  <span style="color:#719e07">return</span> data.map(value =&gt; {<span style="color:#719e07">return</span> value.toUpperCase()});
});
<span style="color:#268bd2">const</span> stringifier <span style="color:#719e07">=</span> csv.stringify();
<span style="color:#586e75">// CSVを生成して
</span><span style="color:#586e75"></span>generator.on(<span style="color:#2aa198">&#39;readable&#39;</span>, () =&gt; {
  <span style="color:#719e07">while</span>(data <span style="color:#719e07">=</span> generator.read()){
    parser.write(data);
  }
});
<span style="color:#586e75">// CSVを読み込んで
</span><span style="color:#586e75"></span>parser.on(<span style="color:#2aa198">&#39;readable&#39;</span>, () =&gt; {
  <span style="color:#719e07">while</span>(data <span style="color:#719e07">=</span> parser.read()){
    transformer.write(data);
  }
});
<span style="color:#586e75">// データを変換して
</span><span style="color:#586e75"></span>transformer.on(<span style="color:#2aa198">&#39;readable&#39;</span>, () =&gt; {
  <span style="color:#719e07">while</span>(data <span style="color:#719e07">=</span> transformer.read()){
    stringifier.write(data);
  }
});
<span style="color:#586e75">// 文字列に変換して
</span><span style="color:#586e75"></span>stringifier.on(<span style="color:#2aa198">&#39;readable&#39;</span>, () =&gt; {
  <span style="color:#719e07">while</span>(data <span style="color:#719e07">=</span> stringifier.read()){
    <span style="color:#586e75">// 標準出力する.
</span><span style="color:#586e75"></span>    process.stdout.write(data);
  }
});
</code></pre></div><p>以下を実行する.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">node index.js
</code></pre></div><h3 id="pipeでstream">pipeでstream</h3>
<p>以下を行ってから</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm init -y
npm i --save csv
touch index.js
</code></pre></div><p><code>index.js</code>に以下を書き込んで</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">const</span> csv <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv&#39;</span>);

<span style="color:#586e75">// CSVを生成して
</span><span style="color:#586e75"></span>csv.generate  ({seed<span style="color:#719e07">:</span> <span style="color:#2aa198">1</span>, length<span style="color:#719e07">:</span> <span style="color:#2aa198">3</span>}).pipe(
<span style="color:#586e75">// CSVを読み込んで
</span><span style="color:#586e75"></span>csv.parse     ()).pipe(
<span style="color:#586e75">// データを変換して
</span><span style="color:#586e75"></span>csv.transform (record =&gt; {
                <span style="color:#719e07">return</span> record.map(value =&gt; {
                  <span style="color:#719e07">return</span> value.toUpperCase()
              })})).pipe(
<span style="color:#586e75">// 文字列にして
</span><span style="color:#586e75"></span>csv.stringify ()).pipe(
<span style="color:#586e75">// 標準出力する.
</span><span style="color:#586e75"></span>process.stdout);
</code></pre></div><p>以下を実行する.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">node index.js
</code></pre></div><h3 id="コールバック">コールバック</h3>
<p>以下を行ってから</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm init -y
npm i --save csv
touch index.js
</code></pre></div><p><code>index.js</code>に以下を書き込んで</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">const</span> csv <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv&#39;</span>);

<span style="color:#586e75">// CSVを生成して
</span><span style="color:#586e75"></span>csv.generate({seed<span style="color:#719e07">:</span> <span style="color:#2aa198">1</span>, columns<span style="color:#719e07">:</span> <span style="color:#2aa198">2</span>, length<span style="color:#719e07">:</span> <span style="color:#2aa198">3</span>}, (err, data) =&gt; {
  <span style="color:#586e75">// CSVを読み込んで
</span><span style="color:#586e75"></span>  csv.parse(data, (err, data) =&gt; {
    <span style="color:#586e75">// データを変換して
</span><span style="color:#586e75"></span>    csv.transform(data, data =&gt; {
      <span style="color:#719e07">return</span> data.map(value =&gt; {<span style="color:#719e07">return</span> value.toUpperCase()});
    }, (err, data) =&gt; {
      <span style="color:#586e75">// 文字列に変換して
</span><span style="color:#586e75"></span>      csv.stringify(data, (err, data) =&gt; {
        <span style="color:#586e75">// 標準出力する.
</span><span style="color:#586e75"></span>        process.stdout.write(data);
      });
    });
  });
});
</code></pre></div><p>以下を実行する.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">node index.js
</code></pre></div><h3 id="同期処理">同期処理</h3>
<p>以下を行ってから</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">npm init -y
npm i --save csv-generate csv-parse stream-transform csv-stringify
touch index.js
</code></pre></div><p><code>index.js</code>に以下を書き込んで</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#268bd2">const</span> generate <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv-generate/lib/sync&#39;</span>);
<span style="color:#268bd2">const</span> parse <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv-parse/lib/sync&#39;</span>);
<span style="color:#268bd2">const</span> transform <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;stream-transform/lib/sync&#39;</span>);
<span style="color:#268bd2">const</span> stringify <span style="color:#719e07">=</span> require(<span style="color:#2aa198">&#39;csv-stringify&#39;</span>);

<span style="color:#586e75">// CSVを生成して
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> csvFile <span style="color:#719e07">=</span> generate({
  seed<span style="color:#719e07">:</span> <span style="color:#2aa198">1</span>,
  objectMode<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span>,
  columns<span style="color:#719e07">:</span> <span style="color:#2aa198">2</span>,
  length<span style="color:#719e07">:</span> <span style="color:#2aa198">2</span>
});
<span style="color:#586e75">// CSVを読み込んで
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> input <span style="color:#719e07">=</span> parse(csvFile, {
  columns<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span>,
  skip_empty_lines<span style="color:#719e07">:</span> <span style="color:#cb4b16">true</span>
});
<span style="color:#586e75">// データを変換して
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> records <span style="color:#719e07">=</span> transform(input, record =&gt; {
  record.push(record.shift())
  <span style="color:#719e07">return</span> record
});
<span style="color:#586e75">// 文字列に変換して
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> moji <span style="color:#719e07">=</span> stringify(records, (err, output) =&gt; {
  <span style="color:#586e75">// 出力する.
</span><span style="color:#586e75"></span>  console.log(output);
});
</code></pre></div><p>以下を実行する.</p>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">node index.js
</code></pre></div><h2 id="streamとは">Streamとは</h2>
<ul>
<li>データストリーム(データの転送単位がブロックより細かいバイト単位で行う方式)を扱うオブジェクト.</li>
<li>Streamオブジェクトはデータをストリームとして(データを流れる様にして)扱いたい時に使う.</li>
<li><strong>References:</strong></li>
<li>
  <a href="https://qiita.com/masakura/items/5683e8e3e655bfda6756">Node.js Stream を使いこなす</a></li>
<li>
  <a href="https://qiita.com/Mizunashi_Mana/items/872354cd7bf25090932f">Stream API入門</a></li>
</ul>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#586e75">// ブロッキングでファイルを読み書きする.
</span><span style="color:#586e75">// データを読み込んでる間は全ての処理がストップする.
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> text <span style="color:#719e07">=</span> fs.readFileSync(<span style="color:#2aa198">&#39;src.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>);
fs.writeFileSync(<span style="color:#2aa198">&#39;dest.txt&#39;</span>, text);

<span style="color:#586e75">// 非ブロッキングI/Oでファイルを読み書きする.
</span><span style="color:#586e75">// データを読み込んでる間も他の処理はできるが, 書き込みは読み込みが終わってから.
</span><span style="color:#586e75"></span>fs.readFile(<span style="color:#2aa198">&#39;src.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>, (err, data) =&gt; {
  fs.writeFile(<span style="color:#2aa198">&#39;dest.txt&#39;</span>, data);
});

<span style="color:#586e75">// 一定量だけデータを読み込んで書き込みを行う.
</span><span style="color:#586e75">// 大きなファイルだと大活躍.
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> src <span style="color:#719e07">=</span> fs.createReadStream(<span style="color:#2aa198">&#39;src.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>);
<span style="color:#268bd2">const</span> dest <span style="color:#719e07">=</span> fs.createWriteStream(<span style="color:#2aa198">&#39;dest.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>);
src.on(<span style="color:#2aa198">&#39;data&#39;</span>, chunk =&gt; dest.write(chunk));
src.on(<span style="color:#2aa198">&#39;end&#39;</span>, () =&gt; dest.end());

<span style="color:#586e75">// pipeも使える.
</span><span style="color:#586e75"></span><span style="color:#268bd2">const</span> src <span style="color:#719e07">=</span> fs.createReadStream(<span style="color:#2aa198">&#39;src.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>);
<span style="color:#268bd2">const</span> dest <span style="color:#719e07">=</span> fs.createWriteStream(<span style="color:#2aa198">&#39;dest.txt&#39;</span>, <span style="color:#2aa198">&#39;utf8&#39;</span>);
src.pipe(dest);
</code></pre></div><h3 id="streamの種類">Streamの種類</h3>
<table>
<thead>
<tr>
<th>名称</th>
<th>意味</th>
</tr>
</thead>
<tbody>
<tr>
<td>stream.Readable</td>
<td>読み取りだけができるストリーム</td>
</tr>
<tr>
<td>stream.Writable</td>
<td>書き込みだけができるストリーム</td>
</tr>
<tr>
<td>stream.Duplex</td>
<td>読み取りも書き込みもできるストリーム</td>
</tr>
<tr>
<td>stream.Transform</td>
<td>読み取ったデータを変換して出力するストリーム</td>
</tr>
</tbody>
</table>
<h3 id="公式reference">公式Reference</h3>
<ul>
<li>
  <a href="https://nodejs.org/api/stream.html">Stream</a></li>
</ul>
<h1 id="yarn">yarn</h1>
<ul>
<li>こちらもNode.jsのパッケージ管理ツール.</li>
<li><strong>GitHubリポジトリ:</strong> <a href="https://github.com/yarnpkg/yarn">https://github.com/yarnpkg/yarn</a></li>
</ul>
<h2 id="パッケージを最新バージョンへ">パッケージを最新バージョンへ</h2>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">yarn outdated <span style="color:#586e75"># 新しいバージョンを確認</span>
yarn upgrade <span style="color:#586e75"># パッケージのアップグレード</span>
yarn upgrade-interactive <span style="color:#586e75"># 上記2つを一緒に行う</span>
</code></pre></div></article>
 
      

      <footer class="book-footer">
        
  <div class="flex justify-between">



  <div>
    
    <a class="flex align-center" href="https://github.com/solareenlo/blog-hugo/commit/bea798d93c9116bad5b5ceb26ca3159b372095e9" title='Last modified by solareenlo | Mar 20, 2020' target="_blank" rel="noopener">
      <img src="/svg/calendar.svg" class="book-icon" alt="Calendar" />
      <span>Mar 20, 2020</span>
    </a>
  </div>



  <div>
    <a class="flex align-center" href="https://github.com/solareenlo/blog-hugo/edit/master/content/docs/pl/nodejs.md" target="_blank" rel="noopener">
      <img src="/svg/edit.svg" class="book-icon" alt="Edit" />
      <span>Edit this page</span>
    </a>
  </div>

</div>

 
        
      </footer>

      
  
  <div class="book-comments">

</div>
  
 

      <label for="menu-control" class="hidden book-menu-overlay"></label>
    </div>

    
    <aside class="book-toc">
      
  <nav id="TableOfContents">
  <ul>
    <li><a href="#nodejsとは">Node.jsとは</a>
      <ul>
        <li><a href="#インストール">インストール</a></li>
        <li><a href="#テストツールの種類">テストツールの種類</a></li>
        <li><a href="#日付を扱う">日付を扱う</a></li>
        <li><a href="#引数で判定">引数で判定</a></li>
        <li><a href="#mapの中で非同期処理">mapの中で非同期処理</a></li>
        <li><a href="#csvを扱う">CSVを扱う</a>
          <ul>
            <li><a href="#stream">stream</a></li>
            <li><a href="#pipeでstream">pipeでstream</a></li>
            <li><a href="#コールバック">コールバック</a></li>
            <li><a href="#同期処理">同期処理</a></li>
          </ul>
        </li>
        <li><a href="#streamとは">Streamとは</a>
          <ul>
            <li><a href="#streamの種類">Streamの種類</a></li>
            <li><a href="#公式reference">公式Reference</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#yarn">yarn</a>
      <ul>
        <li><a href="#パッケージを最新バージョンへ">パッケージを最新バージョンへ</a></li>
      </ul>
    </li>
  </ul>
</nav>

 
    </aside>
    
  </main>

  
</body>

</html>












