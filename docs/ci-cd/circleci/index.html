<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="CircleCIとは  クラウド上でCI/CDを行なってくれるサービスの1つ. 公式サイト: https://circleci.com  docs   CircleCI Documentation  Angular > CircleCI > GitHub Pages の例   iotajapan/ng-iotajapan  submoduleをpush出来るようにするには  Settings > PERMISSIONS > Checkout SSH keys でuser keyを有効にする.  AWSのS3へデプロイ   Nuxt.js+CircleCIで静的ページをAWSのS3へデプロイする  AWSのElastic Beanstalkへデプロイ   以下でCircleCIでElastic Beanstalk CLIを起動して, デプロイする.
# .circleci/config.yml version: 2 jobs: deploy: working_directory: ~/app docker: - image: circleci/ruby:2.6.3 steps: - checkout - run: name: Installing deployment dependencies working_directory: / command: | sudo apt-get -y -qq update sudo apt-get install python-pip python-dev build-essential sudo pip install --upgrade setuptools sudo pip install awsebcli --upgrade - run: name: Deploying command: eb deploy master-TaxPlusAws01-env workflows: version: 2 build: jobs: - deploy: filters: branches: only: - master     以下はElastci Beanstalk CLIの設定."><meta property="og:title" content><meta property="og:description" content="CircleCIとは  クラウド上でCI/CDを行なってくれるサービスの1つ. 公式サイト: https://circleci.com  docs   CircleCI Documentation  Angular > CircleCI > GitHub Pages の例   iotajapan/ng-iotajapan  submoduleをpush出来るようにするには  Settings > PERMISSIONS > Checkout SSH keys でuser keyを有効にする.  AWSのS3へデプロイ   Nuxt.js+CircleCIで静的ページをAWSのS3へデプロイする  AWSのElastic Beanstalkへデプロイ   以下でCircleCIでElastic Beanstalk CLIを起動して, デプロイする.
# .circleci/config.yml version: 2 jobs: deploy: working_directory: ~/app docker: - image: circleci/ruby:2.6.3 steps: - checkout - run: name: Installing deployment dependencies working_directory: / command: | sudo apt-get -y -qq update sudo apt-get install python-pip python-dev build-essential sudo pip install --upgrade setuptools sudo pip install awsebcli --upgrade - run: name: Deploying command: eb deploy master-TaxPlusAws01-env workflows: version: 2 build: jobs: - deploy: filters: branches: only: - master     以下はElastci Beanstalk CLIの設定."><meta property="og:type" content="article"><meta property="og:url" content="https://solareenlo.com/docs/ci-cd/circleci/"><meta property="article:modified_time" content="2020-03-20T07:56:42+09:00"><title>Circleci | solareenlo</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e80d0e54115ef090f688943719b0c54d1ce5720639cefab6c880b93a94108e5f.css integrity="sha256-6A0OVBFe8JD2iJQ3GbDFTRzlcgY5zvq2yIC5OpQQjl8="><script defer src=/en.search.min.73eefc5493075c3ee385f7d8ab9f8eaaded54f694f7ccaa956f263714a30185c.js integrity="sha256-c+78VJMHXD7jhffYq5+Oqt7VT2lPfMqpVvJjcUowGFw="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>solareenlo</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/posts/>Blog</a></li></ul><ul><li><a href=/docs/programming/ class=collapsed>Programming</a></li><li><a href=/docs/pl/ class=collapsed>Programming Language</a></li><li><a href=/docs/latex/ class=collapsed>LaTeX</a></li><li><a href=/docs/vps/ class=collapsed>VPS</a></li><li><a href=/docs/db/ class=collapsed>DB</a></li><li><a href=/docs/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/ci-cd/ class=collapsed>CI/CD</a><ul><li><a href=/docs/ci-cd/circleci/ class=active>Circleci</a></li><li><a href=/docs/ci-cd/jenkins/>Jenkins</a></li><li><a href=/docs/ci-cd/travis-ci/>Travis Ci</a></li></ul></li><li><a href=/docs/container/ class=collapsed>Conatainer</a></li><li><a href=/docs/crypto/ class=collapsed>Crypto</a></li><li><a href=/docs/tools/>Tools</a><ul></ul></li></ul><ul><li><a href=https://github.com/solareenlo/blog-hugo target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Circleci</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><a href=#circleciとは>CircleCIとは</a><ul><li><a href=#docs>docs</a></li><li><a href=#angular--circleci--github-pages-の例>Angular > CircleCI > GitHub Pages の例</a></li><li><a href=#submoduleをpush出来るようにするには>submoduleをpush出来るようにするには</a></li><li><a href=#awsのs3へデプロイ>AWSのS3へデプロイ</a></li><li><a href=#awsのelastic-beanstalkへデプロイ>AWSのElastic Beanstalkへデプロイ</a></li><li><a href=#参考サイト>参考サイト</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1 id=circleciとは>CircleCIとは</h1><ul><li>クラウド上でCI/CDを行なってくれるサービスの1つ.</li><li><strong>公式サイト:</strong> <a href=https://circleci.com>https://circleci.com</a></li></ul><h2 id=docs>docs</h2><ul><li><a href=https://github.com/circleci/circleci-docs>CircleCI Documentation</a></li></ul><h2 id=angular--circleci--github-pages-の例>Angular > CircleCI > GitHub Pages の例</h2><ul><li><a href=https://github.com/iotajapan/ng-iotajapan>iotajapan/ng-iotajapan</a></li></ul><h2 id=submoduleをpush出来るようにするには>submoduleをpush出来るようにするには</h2><ul><li>Settings > PERMISSIONS > Checkout SSH keys でuser keyを有効にする.</li></ul><h2 id=awsのs3へデプロイ>AWSのS3へデプロイ</h2><ul><li><a href=https://qiita.com/noplan1989/items/21af46b4101392ffc666>Nuxt.js+CircleCIで静的ページをAWSのS3へデプロイする</a></li></ul><h2 id=awsのelastic-beanstalkへデプロイ>AWSのElastic Beanstalkへデプロイ</h2><ol><li><p>以下で<code>CircleCI</code>で<code>Elastic Beanstalk CLI</code>を起動して, デプロイする.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#586e75># .circleci/config.yml</span>
<span style=color:#719e07>version</span>: <span style=color:#2aa198>2</span>
<span style=color:#719e07>jobs</span>:
  <span style=color:#719e07>deploy</span>:
    <span style=color:#719e07>working_directory</span>: ~/app
    <span style=color:#719e07>docker</span>:
      - <span style=color:#719e07>image</span>: circleci/ruby:<span style=color:#2aa198>2.6.3</span>
    <span style=color:#719e07>steps</span>:
      - checkout
      - <span style=color:#719e07>run</span>:
          <span style=color:#719e07>name</span>: Installing deployment dependencies
          <span style=color:#719e07>working_directory</span>: /
          <span style=color:#719e07>command</span>: <span style=color:#2aa198>|
</span><span style=color:#2aa198>            sudo apt-get -y -qq update</span>
            sudo apt-get install python-pip python-dev build-essential
            sudo pip install --upgrade setuptools
            sudo pip install awsebcli --upgrade
      - <span style=color:#719e07>run</span>:
          <span style=color:#719e07>name</span>: Deploying
          <span style=color:#719e07>command</span>: eb deploy master-TaxPlusAws01-env

<span style=color:#719e07>workflows</span>:
  <span style=color:#719e07>version</span>: <span style=color:#2aa198>2</span>
  <span style=color:#719e07>build</span>:
    <span style=color:#719e07>jobs</span>:
      - <span style=color:#719e07>deploy</span>:
          <span style=color:#719e07>filters</span>:
            <span style=color:#719e07>branches</span>:
              <span style=color:#719e07>only</span>:
                - master
</code></pre></div></li></ol><ul><li><p>以下は<code>Elastci Beanstalk CLI</code>の設定.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-yaml data-lang=yaml><span style=color:#586e75># .elasticbeanstalk/config.yml</span>
<span style=color:#719e07>branch-defaults</span>:
  <span style=color:#719e07>master</span>:
    <span style=color:#719e07>environment</span>: master-TaxPlusAws01-env
<span style=color:#719e07>global</span>:
  <span style=color:#719e07>application_name</span>: tax-plus-aws<span style=color:#2aa198>-01</span>
  <span style=color:#719e07>default_ec2_keyname</span>: tax-plus
  <span style=color:#719e07>default_platform</span>: 64bit Amazon Linux <span style=color:#2aa198>2018.03</span> v4<span style=color:#2aa198>.8.2</span> running Node.js
  <span style=color:#719e07>default_region</span>: ap-northeast<span style=color:#2aa198>-1</span>
  <span style=color:#719e07>sc</span>: git
</code></pre></div></li><li><p>そして, <code>CircleCI</code>の<code>Project Settings > Environment Variables</code>で<code>AWS_ACCESS_KEY_ID</code>と<code>AWS_SECRET_ACCESS_KEY</code>を設定する.</p></li><li><p><strong>Reference:</strong></p><ul><li><a href=https://gist.github.com/ryansimms/808214137d219be649e010a07af44bad>Deploying to Elastic Beanstalk via CircleCi 2.0</a></li><li><a href=https://github.com/solareenlo/tax-plus-aws>https://github.com/solareenlo/tax-plus-aws</a></li></ul></li></ul><h2 id=参考サイト>参考サイト</h2><ul><li><a href=https://speakerdeck.com/inductor/circleci-terraform>CircleCI 2.1の機能を使ってインフラの"ほぼ"全自動構成管理をやってみた話</a></li><li><a href=https://tech.recruit-mp.co.jp/dev-tools/post-14868/>CircleCI 2.1 の新機能を使って冗長な config.yml をすっきりさせよう！</a></li></ul></article><footer class=book-footer><div class="flex justify-between"><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/commit/bea798d93c9116bad5b5ceb26ca3159b372095e9 title="Last modified by solareenlo | Mar 20, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Mar 20, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/edit/master/content/docs/ci-cd/circleci.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><a href=#circleciとは>CircleCIとは</a><ul><li><a href=#docs>docs</a></li><li><a href=#angular--circleci--github-pages-の例>Angular > CircleCI > GitHub Pages の例</a></li><li><a href=#submoduleをpush出来るようにするには>submoduleをpush出来るようにするには</a></li><li><a href=#awsのs3へデプロイ>AWSのS3へデプロイ</a></li><li><a href=#awsのelastic-beanstalkへデプロイ>AWSのElastic Beanstalkへデプロイ</a></li><li><a href=#参考サイト>参考サイト</a></li></ul></li></ul></nav></aside></main></body></html>