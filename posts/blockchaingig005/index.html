<!doctype html><html lang=ja><head><meta name=generator content="Hugo 0.80.0"><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Blockchain GIG #5
 ハッシュタグは#blockchaingig  Oracleさん #  ユースケース #   食品のトレーサビリティ 貿易系 人事情報・学歴情報 サプライチェーンが多い コバルトのトレーサビリティ 医療情報の共有 サプライヤーの共有 GEのインターカンパニーの売掛・買掛をブロックチェーンで管理しよう  インテグレーション・見える化・ データーの連携レイヤーをブロックチェーンで使った 6週間で作れた    ベスプラ #   チャネルとはサブネットワークに分けるもの ChannelとPeerの関係 Transient Data  台帳に含まれないようにChaincodeに引き渡せるデータ   Pravate Data Collection  プライベートデータを持つノードを事前に決めておく必要がある   暗号化  鍵交換問題 Transient Dataを使って共通鍵を引き渡す 暗号化アルゴリズムは稀代化する 誰をどの程度信頼するか  デフォルトではPeerにアクセスできれば台帳が読める Peerも結局のところOS上のプロセスの一つなので、ホストマシンをキチンとセキュアにする     アプリケーションとスマコン  スマコンをチェインコードという 台帳に全てを書こうとしない ワークフローはアプリケーションで行う  １企業内でのワークフローはアプリケーションで行う   スマコンは必ず決定論的にする ワールドステートの現在状態と引数のみに依存するようにする PushではなくてPullでスマコンを行うようにする   パフォーマンス  ネットワーク構成  Channelの構成  プライバシーの構成に応じてChannelを分ける   Peerの構成     World Stateへのアクセス  アクセスするデータの最小化  Read/WriteされるKeyを出来る限り最小にする 大規模クエリや分析などはオンチェーンでの処理には向かない   SQL Rich クエリは使えない   Oracle DB 20c  行をハッシュ値で繋いだTableです    富士通さん #  ミッション #   ブロックチェーンをSEが使いやすい状態に仕立てて提供・運用すること PaaS化して自動運用 短期開発のため、システム/アプリケーションの開発に密に関わる  SEが躓くHyperledger Fabricの壁 #   複数のPeerにリクエストする必要がある スマコン(チェーンコード)の開発  データとストアとしてStateDB(KVS)を持つアプリケーションのようなもの 基本的には案件ごとに開発する必要がある どこまで考慮するば良いかの線引きが難しい    SEが躓かないための解決策 #   使用性向上機能を設ける  RESTサーバーを設ける ユースケース別チェーンコードを設ける    トラブル事例１(不自然な画面遷移) #   スタンプラリーPoCのアプリ開発における事例  アプリからトランザクションが複数投げられてた    原因 #   クーポン・スタンプに対する認識の違い  来店前に用意するもの・来店後に用意するもの    対策 #   １度のコールでメソッドを複数実行できるメソッドを追加した(バルク実行)  一度にバルク実行するメソッド群に依存会計が無いことが前提   アプリ側で吸収する  処理をまとめる発想を捨てて、違和感のない箇所に分散させる 違和感を消すために、同期・非同期で処理させる    テスト工程でエラーが発生する #   遅いPeerでエラーが発生する  ノードの配置はAnti-Affinityポリジーを守ってた Anti-Affinityポリシーとは可用性のためにノードを物理的に分散化させること    原因 #   遅いPeerのトランザクションより先に速いPeerのトランザクションが処理さえる  解決策 #   遅いPeerのために待ってあげる  RFTの時にお客様から #   トランザクション・チェーンコード・ステート・ブロックを事前に説明する  開発リードタイム短縮も大事ですが #   構想通りのブロックチェーンシステムが出来たか評価する No Block, No Life  LayerXさん #  DApps開発特有のハマりポイントご紹介 #   アプリ開発の1つのコンポーネントとして使う  アジェンダ #   DAppsのアーキテクチャ全体像 Indexer イベント駆動のトランザクション実行 コントラクトデプロイのフロー UX  DAppsのアーキテクチャ全体像 #   サーバーが必要  MetaMask   Indexerが必要  コントラクト上にあるデータをDBなどにキャッシュする  二重実行されてないことを確認する indexing済みの次のブロックからログを取得する 取得したイベントのログの数だけループする   Quorum-indexer-DBの流れにする DB-APIにする   Quorum, indexer, API, DB, App  イベント駆動のトランザクション実行(ignitor) #   トランザクションのイベント発火を起点として別のトランザクションを実行する トリガー専用のイベントを用意する 失敗専用のイベントを発火する。失敗をrevertとするのではなくて。  ignitorとindexerとの協調 #   ignitorとindexerを完全に独立させることはできない indexerは1ブロックに含まれるイベントをatomicにDBに保存しているので、  コントラクのデプロイフロー #  トランザクション実行中の状態をどうするか？ #   途中のAPIで表示処理する  ディスカッション #  現実での紐付け問題はどうするか？ #  ブロックチェーンがはまるところは #   需要と供給が公開される市場"><meta name=theme-color content="#FFFFFF"><meta property="og:title" content="Oracle Blockchain GIG#5"><meta property="og:description" content="Blockchain GIG #5
 ハッシュタグは#blockchaingig  Oracleさん #  ユースケース #   食品のトレーサビリティ 貿易系 人事情報・学歴情報 サプライチェーンが多い コバルトのトレーサビリティ 医療情報の共有 サプライヤーの共有 GEのインターカンパニーの売掛・買掛をブロックチェーンで管理しよう  インテグレーション・見える化・ データーの連携レイヤーをブロックチェーンで使った 6週間で作れた    ベスプラ #   チャネルとはサブネットワークに分けるもの ChannelとPeerの関係 Transient Data  台帳に含まれないようにChaincodeに引き渡せるデータ   Pravate Data Collection  プライベートデータを持つノードを事前に決めておく必要がある   暗号化  鍵交換問題 Transient Dataを使って共通鍵を引き渡す 暗号化アルゴリズムは稀代化する 誰をどの程度信頼するか  デフォルトではPeerにアクセスできれば台帳が読める Peerも結局のところOS上のプロセスの一つなので、ホストマシンをキチンとセキュアにする     アプリケーションとスマコン  スマコンをチェインコードという 台帳に全てを書こうとしない ワークフローはアプリケーションで行う  １企業内でのワークフローはアプリケーションで行う   スマコンは必ず決定論的にする ワールドステートの現在状態と引数のみに依存するようにする PushではなくてPullでスマコンを行うようにする   パフォーマンス  ネットワーク構成  Channelの構成  プライバシーの構成に応じてChannelを分ける   Peerの構成     World Stateへのアクセス  アクセスするデータの最小化  Read/WriteされるKeyを出来る限り最小にする 大規模クエリや分析などはオンチェーンでの処理には向かない   SQL Rich クエリは使えない   Oracle DB 20c  行をハッシュ値で繋いだTableです    富士通さん #  ミッション #   ブロックチェーンをSEが使いやすい状態に仕立てて提供・運用すること PaaS化して自動運用 短期開発のため、システム/アプリケーションの開発に密に関わる  SEが躓くHyperledger Fabricの壁 #   複数のPeerにリクエストする必要がある スマコン(チェーンコード)の開発  データとストアとしてStateDB(KVS)を持つアプリケーションのようなもの 基本的には案件ごとに開発する必要がある どこまで考慮するば良いかの線引きが難しい    SEが躓かないための解決策 #   使用性向上機能を設ける  RESTサーバーを設ける ユースケース別チェーンコードを設ける    トラブル事例１(不自然な画面遷移) #   スタンプラリーPoCのアプリ開発における事例  アプリからトランザクションが複数投げられてた    原因 #   クーポン・スタンプに対する認識の違い  来店前に用意するもの・来店後に用意するもの    対策 #   １度のコールでメソッドを複数実行できるメソッドを追加した(バルク実行)  一度にバルク実行するメソッド群に依存会計が無いことが前提   アプリ側で吸収する  処理をまとめる発想を捨てて、違和感のない箇所に分散させる 違和感を消すために、同期・非同期で処理させる    テスト工程でエラーが発生する #   遅いPeerでエラーが発生する  ノードの配置はAnti-Affinityポリジーを守ってた Anti-Affinityポリシーとは可用性のためにノードを物理的に分散化させること    原因 #   遅いPeerのトランザクションより先に速いPeerのトランザクションが処理さえる  解決策 #   遅いPeerのために待ってあげる  RFTの時にお客様から #   トランザクション・チェーンコード・ステート・ブロックを事前に説明する  開発リードタイム短縮も大事ですが #   構想通りのブロックチェーンシステムが出来たか評価する No Block, No Life  LayerXさん #  DApps開発特有のハマりポイントご紹介 #   アプリ開発の1つのコンポーネントとして使う  アジェンダ #   DAppsのアーキテクチャ全体像 Indexer イベント駆動のトランザクション実行 コントラクトデプロイのフロー UX  DAppsのアーキテクチャ全体像 #   サーバーが必要  MetaMask   Indexerが必要  コントラクト上にあるデータをDBなどにキャッシュする  二重実行されてないことを確認する indexing済みの次のブロックからログを取得する 取得したイベントのログの数だけループする   Quorum-indexer-DBの流れにする DB-APIにする   Quorum, indexer, API, DB, App  イベント駆動のトランザクション実行(ignitor) #   トランザクションのイベント発火を起点として別のトランザクションを実行する トリガー専用のイベントを用意する 失敗専用のイベントを発火する。失敗をrevertとするのではなくて。  ignitorとindexerとの協調 #   ignitorとindexerを完全に独立させることはできない indexerは1ブロックに含まれるイベントをatomicにDBに保存しているので、  コントラクのデプロイフロー #  トランザクション実行中の状態をどうするか？ #   途中のAPIで表示処理する  ディスカッション #  現実での紐付け問題はどうするか？ #  ブロックチェーンがはまるところは #   需要と供給が公開される市場"><meta property="og:type" content="article"><meta property="og:url" content="https://solareenlo.com/posts/blockchaingig005/"><meta property="article:published_time" content="2019-10-10T18:30:00+09:00"><meta property="article:modified_time" content="2020-03-20T08:57:13+09:00"><title>Oracle Blockchain GIG#5 | solareenlo</title><link rel=manifest href=/manifest.json><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.81c91df4d7ac1d9248c87650e9463592105b1f2bc5640263e0270a6070528cbc.css integrity="sha256-gckd9NesHZJIyHZQ6UY1khBbHyvFZAJj4CcKYHBSjLw="><script defer src=/ja.search.min.0bbc896c010732bd9bcadb3e627c9b8d5fe8508ba863ce303261751808fa854a.js integrity="sha256-C7yJbAEHMr2byts+YnybjV/oUIuoY84wMmF1GAj6hUo="></script></head><body><input type=checkbox class="hidden toggle" id=menu-control>
<input type=checkbox class="hidden toggle" id=toc-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>solareenlo</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=検索 aria-label=検索 maxlength=64 data-hotkeys=s/><div class="book-search-spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/posts/>Blog</a></li></ul><ul><li><input type=checkbox id=section-57e58ca5aae968f4961a4036f314a5de class=toggle>
<label for=section-57e58ca5aae968f4961a4036f314a5de class="flex justify-between"><a href=https://solareenlo.com/docs/programming/>Programming</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/programming/command/>Command</a></li><li><a href=https://solareenlo.com/docs/programming/fonts/>Fonts</a></li><li><a href=https://solareenlo.com/docs/programming/git/>Git</a></li><li><a href=https://solareenlo.com/docs/programming/github/>Github</a></li><li><a href=https://solareenlo.com/docs/programming/linter-formatter/>Linter Formatter</a></li><li><a href=https://solareenlo.com/docs/programming/password-manager/>Password Manager</a></li><li><a href=https://solareenlo.com/docs/programming/sed/>Sed</a></li><li><a href=https://solareenlo.com/docs/programming/shell-script/>Shell Script</a></li><li><a href=https://solareenlo.com/docs/programming/terminal/>Terminal</a></li><li><a href=https://solareenlo.com/docs/programming/test/>Test</a></li><li><a href=https://solareenlo.com/docs/programming/tmux/>Tmux</a></li><li><a href=https://solareenlo.com/docs/programming/vim/>Vim</a></li><li><a href=https://solareenlo.com/docs/programming/vimium/>Vimium</a></li><li><a href=https://solareenlo.com/docs/programming/wiki/>Wiki</a></li><li><a href=https://solareenlo.com/docs/programming/hhkb/>HHKB</a></li></ul></li><li><input type=checkbox id=section-771d1b18af68e81cd9d3d14cd5f6339b class=toggle>
<label for=section-771d1b18af68e81cd9d3d14cd5f6339b class="flex justify-between"><a href=https://solareenlo.com/docs/pl/>Programming Language</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/pl/angular/>Angular</a></li><li><a href=https://solareenlo.com/docs/pl/c/>C</a></li><li><a href=https://solareenlo.com/docs/pl/css/>Css</a></li><li><a href=https://solareenlo.com/docs/pl/go/>Go</a></li><li><a href=https://solareenlo.com/docs/pl/haskell/>Haskell</a></li><li><a href=https://solareenlo.com/docs/pl/hugo/>Hugo</a></li><li><a href=https://solareenlo.com/docs/pl/javascript/>Javascript</a></li><li><a href=https://solareenlo.com/docs/pl/nodejs/>Nodejs</a></li><li><a href=https://solareenlo.com/docs/pl/pl-docs/>Pl Docs</a></li><li><a href=https://solareenlo.com/docs/pl/react-static/>React Static</a></li><li><a href=https://solareenlo.com/docs/pl/react/>React</a></li><li><a href=https://solareenlo.com/docs/pl/rust/>Rust</a></li><li><a href=https://solareenlo.com/docs/pl/scala/>Scala</a></li><li><a href=https://solareenlo.com/docs/pl/typescript/>Typescript</a></li><li><a href=https://solareenlo.com/docs/pl/npm/>npm</a></li></ul></li><li><input type=checkbox id=section-a7bf5468f483fd7222967f135a5003c0 class=toggle>
<label for=section-a7bf5468f483fd7222967f135a5003c0 class="flex justify-between"><a href=https://solareenlo.com/docs/latex/>LaTeX</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/latex/platex-book/>Platex Book</a></li><li><a href=https://solareenlo.com/docs/latex/zathura-install/>Zathura Install</a></li></ul></li><li><input type=checkbox id=section-e14f9767e53904cbbdcb3f0bdbe82f2a class=toggle>
<label for=section-e14f9767e53904cbbdcb3f0bdbe82f2a class="flex justify-between"><a href=https://solareenlo.com/docs/vps/>VPS</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/vps/alpine-linux/>Alpine Linux</a></li><li><a href=https://solareenlo.com/docs/vps/ubuntu/>Ubuntu</a></li><li><a href=https://solareenlo.com/docs/vps/ssh/>SSH</a></li></ul></li><li><input type=checkbox id=section-99a3d9d52cfe7a0dcbd55cd8c23e4462 class=toggle>
<label for=section-99a3d9d52cfe7a0dcbd55cd8c23e4462 class="flex justify-between"><a href=https://solareenlo.com/docs/db/>DB</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/db/redis/>Redis</a></li><li><a href=https://solareenlo.com/docs/db/mongodb/>MongoDB</a></li><li><a href=https://solareenlo.com/docs/db/mysql/>MySQL</a></li></ul></li><li><input type=checkbox id=section-e5a49337b6189bd60f0b5e1d3a4a8539 class=toggle>
<label for=section-e5a49337b6189bd60f0b5e1d3a4a8539 class="flex justify-between"><a href=https://solareenlo.com/docs/cloud/>Cloud</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/cloud/aws/>Aws</a></li><li><a href=https://solareenlo.com/docs/cloud/firebase/>Firebase</a></li><li><a href=https://solareenlo.com/docs/cloud/gcp/>Gcp</a></li><li><a href=https://solareenlo.com/docs/cloud/sendgrid/>Sendgrid</a></li><li><a href=https://solareenlo.com/docs/cloud/zeit-now/>Zeit Now</a></li></ul></li><li><input type=checkbox id=section-dfa5c6b6f5f2def7a1fbf289a7570ac2 class=toggle>
<label for=section-dfa5c6b6f5f2def7a1fbf289a7570ac2 class="flex justify-between"><a href=https://solareenlo.com/docs/ci-cd/>CI/CD</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/ci-cd/circleci/>Circleci</a></li><li><a href=https://solareenlo.com/docs/ci-cd/jenkins/>Jenkins</a></li><li><a href=https://solareenlo.com/docs/ci-cd/travis-ci/>Travis Ci</a></li></ul></li><li><input type=checkbox id=section-10dd021a58cb696b6cb4f79141ec5ddb class=toggle>
<label for=section-10dd021a58cb696b6cb4f79141ec5ddb class="flex justify-between"><a href=https://solareenlo.com/docs/container/>Conatainer</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/container/docker-compose/>Docker Compose</a></li><li><a href=https://solareenlo.com/docs/container/docker-hub/>Docker Hub</a></li><li><a href=https://solareenlo.com/docs/container/docker1/>Docker1</a></li><li><a href=https://solareenlo.com/docs/container/docker2/>Docker2</a></li><li><a href=https://solareenlo.com/docs/container/kubernetes/>Kubernetes</a></li></ul></li><li><input type=checkbox id=section-342a656e10fe011a820c22dda53f7866 class=toggle>
<label for=section-342a656e10fe011a820c22dda53f7866 class="flex justify-between"><a href=https://solareenlo.com/docs/crypto/>Crypto</a>
<span>▾</span></label><ul><li><a href=https://solareenlo.com/docs/crypto/blockchain/>Blockchain</a></li><li><a href=https://solareenlo.com/docs/crypto/crypto-docs/>Crypto Docs</a></li><li><a href=https://solareenlo.com/docs/crypto/ethereum/>Ethereum</a></li><li><a href=https://solareenlo.com/docs/crypto/substrate/>Substrate</a></li><li><a href=https://solareenlo.com/docs/crypto/white-paper/>White Paper</a></li><li><a href=https://solareenlo.com/docs/crypto/bitcoin/>Bitcoin</a></li><li><a href=https://solareenlo.com/docs/crypto/iota/>IOTA</a></li><li><a href=https://solareenlo.com/docs/crypto/nem/>NEM</a></li><li><a href=https://solareenlo.com/docs/crypto/bitcoin-fullnode/>フルノード</a></li></ul></li><li><a href=https://solareenlo.com/docs/tools/>Tools</a><ul></ul></li></ul><ul><li><a href=https://github.com/solareenlo/blog-hugo target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Oracle Blockchain GIG#5</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#oracleさん>Oracleさん</a><ul><li><a href=#ユースケース>ユースケース</a></li><li><a href=#ベスプラ>ベスプラ</a></li></ul></li><li><a href=#富士通さん>富士通さん</a><ul><li><a href=#ミッション>ミッション</a></li><li><a href=#seが躓くhyperledger-fabricの壁>SEが躓くHyperledger Fabricの壁</a></li><li><a href=#seが躓かないための解決策>SEが躓かないための解決策</a></li><li><a href=#トラブル事例１不自然な画面遷移>トラブル事例１(不自然な画面遷移)</a></li><li><a href=#テスト工程でエラーが発生する>テスト工程でエラーが発生する</a></li><li><a href=#rftの時にお客様から>RFTの時にお客様から</a></li><li><a href=#開発リードタイム短縮も大事ですが>開発リードタイム短縮も大事ですが</a></li></ul></li><li><a href=#layerxさん>LayerXさん</a><ul><li><a href=#dapps開発特有のハマりポイントご紹介>DApps開発特有のハマりポイントご紹介</a></li><li><a href=#アジェンダ>アジェンダ</a></li><li><a href=#dappsのアーキテクチャ全体像>DAppsのアーキテクチャ全体像</a></li><li><a href=#イベント駆動のトランザクション実行ignitor>イベント駆動のトランザクション実行(ignitor)</a></li><li><a href=#ignitorとindexerとの協調>ignitorとindexerとの協調</a></li><li><a href=#コントラクのデプロイフロー>コントラクのデプロイフロー</a></li></ul></li><li><a href=#ディスカッション>ディスカッション</a><ul><li><a href=#現実での紐付け問題はどうするか>現実での紐付け問題はどうするか？</a></li><li><a href=#ブロックチェーンがはまるところは>ブロックチェーンがはまるところは</a></li></ul></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/blockchaingig005/>Oracle Blockchain GIG#5</a></h1><h5>Oct 10, 2019</h5><div><a href=/categories/meetup/>meetup</a>,
<a href=/categories/Blockchain/>Blockchain</a></div><p><p><a href=https://oracle-code-tokyo-dev.connpass.com/event/147125/>Blockchain GIG #5</a></p><ul><li>ハッシュタグは<code>#blockchaingig</code></li></ul><h2 id=oracleさん>Oracleさん
<a class=anchor href=#oracle%e3%81%95%e3%82%93>#</a></h2><h3 id=ユースケース>ユースケース
<a class=anchor href=#%e3%83%a6%e3%83%bc%e3%82%b9%e3%82%b1%e3%83%bc%e3%82%b9>#</a></h3><ul><li>食品のトレーサビリティ</li><li>貿易系</li><li>人事情報・学歴情報</li><li>サプライチェーンが多い</li><li>コバルトのトレーサビリティ</li><li>医療情報の共有</li><li>サプライヤーの共有</li><li>GEのインターカンパニーの売掛・買掛をブロックチェーンで管理しよう<ul><li>インテグレーション・見える化・</li><li>データーの連携レイヤーをブロックチェーンで使った</li><li>6週間で作れた</li></ul></li></ul><h3 id=ベスプラ>ベスプラ
<a class=anchor href=#%e3%83%99%e3%82%b9%e3%83%97%e3%83%a9>#</a></h3><ul><li>チャネルとはサブネットワークに分けるもの</li><li>ChannelとPeerの関係</li><li>Transient Data<ul><li>台帳に含まれないようにChaincodeに引き渡せるデータ</li></ul></li><li>Pravate Data Collection<ul><li>プライベートデータを持つノードを事前に決めておく必要がある</li></ul></li><li>暗号化<ul><li>鍵交換問題</li><li>Transient Dataを使って共通鍵を引き渡す</li><li>暗号化アルゴリズムは稀代化する</li><li>誰をどの程度信頼するか<ul><li>デフォルトではPeerにアクセスできれば台帳が読める</li><li>Peerも結局のところOS上のプロセスの一つなので、ホストマシンをキチンとセキュアにする</li></ul></li></ul></li><li>アプリケーションとスマコン<ul><li>スマコンをチェインコードという</li><li>台帳に全てを書こうとしない</li><li>ワークフローはアプリケーションで行う<ul><li>１企業内でのワークフローはアプリケーションで行う</li></ul></li><li>スマコンは必ず決定論的にする</li><li>ワールドステートの現在状態と引数のみに依存するようにする</li><li>PushではなくてPullでスマコンを行うようにする</li></ul></li><li>パフォーマンス<ul><li>ネットワーク構成<ul><li>Channelの構成<ul><li>プライバシーの構成に応じてChannelを分ける</li></ul></li><li>Peerの構成</li></ul></li></ul></li><li>World Stateへのアクセス<ul><li>アクセスするデータの最小化<ul><li>Read/WriteされるKeyを出来る限り最小にする</li><li>大規模クエリや分析などはオンチェーンでの処理には向かない</li></ul></li><li>SQL Rich クエリは使えない</li></ul></li><li>Oracle DB 20c<ul><li>行をハッシュ値で繋いだTableです</li></ul></li></ul><h2 id=富士通さん>富士通さん
<a class=anchor href=#%e5%af%8c%e5%a3%ab%e9%80%9a%e3%81%95%e3%82%93>#</a></h2><h3 id=ミッション>ミッション
<a class=anchor href=#%e3%83%9f%e3%83%83%e3%82%b7%e3%83%a7%e3%83%b3>#</a></h3><ul><li>ブロックチェーンをSEが使いやすい状態に仕立てて提供・運用すること</li><li>PaaS化して自動運用</li><li>短期開発のため、システム/アプリケーションの開発に密に関わる</li></ul><h3 id=seが躓くhyperledger-fabricの壁>SEが躓くHyperledger Fabricの壁
<a class=anchor href=#se%e3%81%8c%e8%ba%93%e3%81%8fhyperledger-fabric%e3%81%ae%e5%a3%81>#</a></h3><ul><li>複数のPeerにリクエストする必要がある</li><li>スマコン(チェーンコード)の開発<ul><li>データとストアとしてStateDB(KVS)を持つアプリケーションのようなもの</li><li>基本的には案件ごとに開発する必要がある</li><li>どこまで考慮するば良いかの線引きが難しい</li></ul></li></ul><h3 id=seが躓かないための解決策>SEが躓かないための解決策
<a class=anchor href=#se%e3%81%8c%e8%ba%93%e3%81%8b%e3%81%aa%e3%81%84%e3%81%9f%e3%82%81%e3%81%ae%e8%a7%a3%e6%b1%ba%e7%ad%96>#</a></h3><ul><li>使用性向上機能を設ける<ul><li>RESTサーバーを設ける</li><li>ユースケース別チェーンコードを設ける</li></ul></li></ul><h3 id=トラブル事例１不自然な画面遷移>トラブル事例１(不自然な画面遷移)
<a class=anchor href=#%e3%83%88%e3%83%a9%e3%83%96%e3%83%ab%e4%ba%8b%e4%be%8b%ef%bc%91%e4%b8%8d%e8%87%aa%e7%84%b6%e3%81%aa%e7%94%bb%e9%9d%a2%e9%81%b7%e7%a7%bb>#</a></h3><ul><li>スタンプラリーPoCのアプリ開発における事例<ul><li>アプリからトランザクションが複数投げられてた</li></ul></li></ul><h4 id=原因>原因
<a class=anchor href=#%e5%8e%9f%e5%9b%a0>#</a></h4><ul><li>クーポン・スタンプに対する認識の違い<ul><li>来店前に用意するもの・来店後に用意するもの</li></ul></li></ul><h4 id=対策>対策
<a class=anchor href=#%e5%af%be%e7%ad%96>#</a></h4><ul><li>１度のコールでメソッドを複数実行できるメソッドを追加した(バルク実行)<ul><li>一度にバルク実行するメソッド群に依存会計が無いことが前提</li></ul></li><li>アプリ側で吸収する<ul><li>処理をまとめる発想を捨てて、違和感のない箇所に分散させる</li><li>違和感を消すために、同期・非同期で処理させる</li></ul></li></ul><h3 id=テスト工程でエラーが発生する>テスト工程でエラーが発生する
<a class=anchor href=#%e3%83%86%e3%82%b9%e3%83%88%e5%b7%a5%e7%a8%8b%e3%81%a7%e3%82%a8%e3%83%a9%e3%83%bc%e3%81%8c%e7%99%ba%e7%94%9f%e3%81%99%e3%82%8b>#</a></h3><ul><li>遅いPeerでエラーが発生する<ul><li>ノードの配置はAnti-Affinityポリジーを守ってた</li><li>Anti-Affinityポリシーとは可用性のためにノードを物理的に分散化させること</li></ul></li></ul><h4 id=原因-1>原因
<a class=anchor href=#%e5%8e%9f%e5%9b%a0-1>#</a></h4><ul><li>遅いPeerのトランザクションより先に速いPeerのトランザクションが処理さえる</li></ul><h4 id=解決策>解決策
<a class=anchor href=#%e8%a7%a3%e6%b1%ba%e7%ad%96>#</a></h4><ul><li>遅いPeerのために待ってあげる</li></ul><h3 id=rftの時にお客様から>RFTの時にお客様から
<a class=anchor href=#rft%e3%81%ae%e6%99%82%e3%81%ab%e3%81%8a%e5%ae%a2%e6%a7%98%e3%81%8b%e3%82%89>#</a></h3><ul><li>トランザクション・チェーンコード・ステート・ブロックを事前に説明する</li></ul><h3 id=開発リードタイム短縮も大事ですが>開発リードタイム短縮も大事ですが
<a class=anchor href=#%e9%96%8b%e7%99%ba%e3%83%aa%e3%83%bc%e3%83%89%e3%82%bf%e3%82%a4%e3%83%a0%e7%9f%ad%e7%b8%ae%e3%82%82%e5%a4%a7%e4%ba%8b%e3%81%a7%e3%81%99%e3%81%8c>#</a></h3><ul><li>構想通りのブロックチェーンシステムが出来たか評価する</li><li>No Block, No Life</li></ul><h2 id=layerxさん>LayerXさん
<a class=anchor href=#layerx%e3%81%95%e3%82%93>#</a></h2><h3 id=dapps開発特有のハマりポイントご紹介>DApps開発特有のハマりポイントご紹介
<a class=anchor href=#dapps%e9%96%8b%e7%99%ba%e7%89%b9%e6%9c%89%e3%81%ae%e3%83%8f%e3%83%9e%e3%82%8a%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88%e3%81%94%e7%b4%b9%e4%bb%8b>#</a></h3><ul><li>アプリ開発の1つのコンポーネントとして使う</li></ul><h3 id=アジェンダ>アジェンダ
<a class=anchor href=#%e3%82%a2%e3%82%b8%e3%82%a7%e3%83%b3%e3%83%80>#</a></h3><ul><li>DAppsのアーキテクチャ全体像</li><li>Indexer</li><li>イベント駆動のトランザクション実行</li><li>コントラクトデプロイのフロー</li><li>UX</li></ul><h3 id=dappsのアーキテクチャ全体像>DAppsのアーキテクチャ全体像
<a class=anchor href=#dapps%e3%81%ae%e3%82%a2%e3%83%bc%e3%82%ad%e3%83%86%e3%82%af%e3%83%81%e3%83%a3%e5%85%a8%e4%bd%93%e5%83%8f>#</a></h3><ul><li>サーバーが必要<ul><li>MetaMask</li></ul></li><li>Indexerが必要<ul><li>コントラクト上にあるデータをDBなどにキャッシュする<ul><li>二重実行されてないことを確認する</li><li>indexing済みの次のブロックからログを取得する</li><li>取得したイベントのログの数だけループする</li></ul></li><li>Quorum-indexer-DBの流れにする</li><li>DB-APIにする</li></ul></li><li>Quorum, indexer, API, DB, App</li></ul><h3 id=イベント駆動のトランザクション実行ignitor>イベント駆動のトランザクション実行(ignitor)
<a class=anchor href=#%e3%82%a4%e3%83%99%e3%83%b3%e3%83%88%e9%a7%86%e5%8b%95%e3%81%ae%e3%83%88%e3%83%a9%e3%83%b3%e3%82%b6%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e5%ae%9f%e8%a1%8cignitor>#</a></h3><ul><li>トランザクションのイベント発火を起点として別のトランザクションを実行する</li><li>トリガー専用のイベントを用意する</li><li>失敗専用のイベントを発火する。失敗をrevertとするのではなくて。</li></ul><h3 id=ignitorとindexerとの協調>ignitorとindexerとの協調
<a class=anchor href=#ignitor%e3%81%a8indexer%e3%81%a8%e3%81%ae%e5%8d%94%e8%aa%bf>#</a></h3><ul><li>ignitorとindexerを完全に独立させることはできない</li><li>indexerは1ブロックに含まれるイベントをatomicにDBに保存しているので、</li></ul><h3 id=コントラクのデプロイフロー>コントラクのデプロイフロー
<a class=anchor href=#%e3%82%b3%e3%83%b3%e3%83%88%e3%83%a9%e3%82%af%e3%81%ae%e3%83%87%e3%83%97%e3%83%ad%e3%82%a4%e3%83%95%e3%83%ad%e3%83%bc>#</a></h3><h4 id=トランザクション実行中の状態をどうするか>トランザクション実行中の状態をどうするか？
<a class=anchor href=#%e3%83%88%e3%83%a9%e3%83%b3%e3%82%b6%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e5%ae%9f%e8%a1%8c%e4%b8%ad%e3%81%ae%e7%8a%b6%e6%85%8b%e3%82%92%e3%81%a9%e3%81%86%e3%81%99%e3%82%8b%e3%81%8b>#</a></h4><ul><li>途中のAPIで表示処理する</li></ul><h2 id=ディスカッション>ディスカッション
<a class=anchor href=#%e3%83%87%e3%82%a3%e3%82%b9%e3%82%ab%e3%83%83%e3%82%b7%e3%83%a7%e3%83%b3>#</a></h2><h3 id=現実での紐付け問題はどうするか>現実での紐付け問題はどうするか？
<a class=anchor href=#%e7%8f%be%e5%ae%9f%e3%81%a7%e3%81%ae%e7%b4%90%e4%bb%98%e3%81%91%e5%95%8f%e9%a1%8c%e3%81%af%e3%81%a9%e3%81%86%e3%81%99%e3%82%8b%e3%81%8b>#</a></h3><h3 id=ブロックチェーンがはまるところは>ブロックチェーンがはまるところは
<a class=anchor href=#%e3%83%96%e3%83%ad%e3%83%83%e3%82%af%e3%83%81%e3%82%a7%e3%83%bc%e3%83%b3%e3%81%8c%e3%81%af%e3%81%be%e3%82%8b%e3%81%a8%e3%81%93%e3%82%8d%e3%81%af>#</a></h3><ul><li>需要と供給が公開される市場</li></ul></p></article><footer class=book-footer><div class="flex flex-wrap justify-between"><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/commit/5a56e5148684d6055b1db895fe6fa7a807c12ff1 title="最終更新者 solareenlo | Mar 20, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Mar 20, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/edit/master/content/content/posts/blockchaingig005.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>このページを編集する</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#oracleさん>Oracleさん</a><ul><li><a href=#ユースケース>ユースケース</a></li><li><a href=#ベスプラ>ベスプラ</a></li></ul></li><li><a href=#富士通さん>富士通さん</a><ul><li><a href=#ミッション>ミッション</a></li><li><a href=#seが躓くhyperledger-fabricの壁>SEが躓くHyperledger Fabricの壁</a></li><li><a href=#seが躓かないための解決策>SEが躓かないための解決策</a></li><li><a href=#トラブル事例１不自然な画面遷移>トラブル事例１(不自然な画面遷移)</a></li><li><a href=#テスト工程でエラーが発生する>テスト工程でエラーが発生する</a></li><li><a href=#rftの時にお客様から>RFTの時にお客様から</a></li><li><a href=#開発リードタイム短縮も大事ですが>開発リードタイム短縮も大事ですが</a></li></ul></li><li><a href=#layerxさん>LayerXさん</a><ul><li><a href=#dapps開発特有のハマりポイントご紹介>DApps開発特有のハマりポイントご紹介</a></li><li><a href=#アジェンダ>アジェンダ</a></li><li><a href=#dappsのアーキテクチャ全体像>DAppsのアーキテクチャ全体像</a></li><li><a href=#イベント駆動のトランザクション実行ignitor>イベント駆動のトランザクション実行(ignitor)</a></li><li><a href=#ignitorとindexerとの協調>ignitorとindexerとの協調</a></li><li><a href=#コントラクのデプロイフロー>コントラクのデプロイフロー</a></li></ul></li><li><a href=#ディスカッション>ディスカッション</a><ul><li><a href=#現実での紐付け問題はどうするか>現実での紐付け問題はどうするか？</a></li><li><a href=#ブロックチェーンがはまるところは>ブロックチェーンがはまるところは</a></li></ul></li></ul></li></ul></nav></aside></main></body></html>