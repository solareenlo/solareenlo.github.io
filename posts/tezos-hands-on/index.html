<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Tezosとは  第3世代のブロックチェーン 2018-09: Mainnet開始 ペーパーで約束されたものをほぼ実装した. 財団がRandDにお金を出してる. PoS  Tezosの特徴  プロトコルはステークホルダーの物というのが第一の信条.  LPos: Liqid Proof of Stake オンチェーン・ガバナンス: 自己修正投票   安全第一  形式検証を用いている    DPoS Proof-of-Stake  トークン所有量に応じたブロック生成権が与えらえる.  ASICが必要ない 手数料が高騰しない 環境に良い   トークンを所有していないマイナーからプロトコルをステークホルダーに解放する.  Delegated PoS (委任PoS)  ステーク投票により選ばれた少数のノードにブロック生成権を与える. 権利を投票に使う. EOSが代表格 利点  PC持ってないステークホルダーも間接的にブロック生成に参加できる. ノード数を減らすことで合意形成効率を上げられる.   欠点  過度にノード数を減らすと分散性・安全性を損なう.    Liquid PoS (Tezos)  選ばれた少数のノードではなく, 誰でもベーキング(ブロック生成)できる. マーケティングにより, マイニングとは言わずにベーキングと言う. ベーカリー(ベーキングの委任を受ける業者のこと), ベーキング権(マイニングする権利), ベーキング(マイニングのこと)という. マイニングを少数ノードに牛耳られることなくステークホルダーに還元するためにLPoSを採用している."><meta property="og:title" content="Tezosハンズオン"><meta property="og:description" content="Tezosとは  第3世代のブロックチェーン 2018-09: Mainnet開始 ペーパーで約束されたものをほぼ実装した. 財団がRandDにお金を出してる. PoS  Tezosの特徴  プロトコルはステークホルダーの物というのが第一の信条.  LPos: Liqid Proof of Stake オンチェーン・ガバナンス: 自己修正投票   安全第一  形式検証を用いている    DPoS Proof-of-Stake  トークン所有量に応じたブロック生成権が与えらえる.  ASICが必要ない 手数料が高騰しない 環境に良い   トークンを所有していないマイナーからプロトコルをステークホルダーに解放する.  Delegated PoS (委任PoS)  ステーク投票により選ばれた少数のノードにブロック生成権を与える. 権利を投票に使う. EOSが代表格 利点  PC持ってないステークホルダーも間接的にブロック生成に参加できる. ノード数を減らすことで合意形成効率を上げられる.   欠点  過度にノード数を減らすと分散性・安全性を損なう.    Liquid PoS (Tezos)  選ばれた少数のノードではなく, 誰でもベーキング(ブロック生成)できる. マーケティングにより, マイニングとは言わずにベーキングと言う. ベーカリー(ベーキングの委任を受ける業者のこと), ベーキング権(マイニングする権利), ベーキング(マイニングのこと)という. マイニングを少数ノードに牛耳られることなくステークホルダーに還元するためにLPoSを採用している."><meta property="og:type" content="article"><meta property="og:url" content="https://solareenlo.com/posts/tezos-hands-on/"><meta property="article:published_time" content="2019-06-15T13:00:00+09:00"><meta property="article:modified_time" content="2020-03-23T10:01:25+09:00"><title>Tezosハンズオン | solareenlo</title><link rel=icon href=/favicon.png type=image/x-icon><link rel=stylesheet href=/book.min.e80d0e54115ef090f688943719b0c54d1ce5720639cefab6c880b93a94108e5f.css integrity="sha256-6A0OVBFe8JD2iJQ3GbDFTRzlcgY5zvq2yIC5OpQQjl8="><script defer src=/en.search.min.c63f6afca6ef0bf90a7d45ac454b2367dbab3a17cf230ed2321b4b818653e45a.js integrity="sha256-xj9q/KbvC/kKfUWsRUsjZ9urOhfPIw7SMhtLgYZT5Fo="></script></head><body><input type=checkbox class=hidden id=menu-control><main class="container flex"><aside class=book-menu><nav><h2 class=book-brand><a href=/><span>solareenlo</span></a></h2><div class=book-search><input type=text id=book-search-input placeholder=Search aria-label=Search maxlength=64 data-hotkeys=s/><div class="book-search-spinner spinner hidden"></div><ul id=book-search-results></ul></div><ul><li><a href=/posts/>Blog</a></li></ul><ul><li><a href=/docs/programming/ class=collapsed>Programming</a></li><li><a href=/docs/pl/ class=collapsed>Programming Language</a></li><li><a href=/docs/latex/ class=collapsed>LaTeX</a></li><li><a href=/docs/vps/ class=collapsed>VPS</a></li><li><a href=/docs/db/ class=collapsed>DB</a></li><li><a href=/docs/cloud/ class=collapsed>Cloud</a></li><li><a href=/docs/ci-cd/ class=collapsed>CI/CD</a></li><li><a href=/docs/container/ class=collapsed>Conatainer</a></li><li><a href=/docs/crypto/ class=collapsed>Crypto</a></li><li><a href=/docs/tools/>Tools</a><ul></ul></li></ul><ul><li><a href=https://github.com/solareenlo/blog-hugo target=_blank rel=noopener>Github</a></li></ul></nav><script>(function(){var menu=document.querySelector("aside.book-menu nav");addEventListener("beforeunload",function(event){localStorage.setItem("menu.scrollTop",menu.scrollTop);});menu.scrollTop=localStorage.getItem("menu.scrollTop");})();</script></aside><div class=book-page><header class=book-header><div class="flex align-center justify-between"><label for=menu-control><img src=/svg/menu.svg class=book-icon alt=Menu></label>
<strong>Tezosハンズオン</strong>
<label for=toc-control><img src=/svg/toc.svg class=book-icon alt="Table of Contents"></label></div><input type=checkbox class=hidden id=toc-control><aside class="hidden clearfix"><nav id=TableOfContents><ul><li><ul><li><a href=#tezosとは>Tezosとは</a></li><li><a href=#tezosの特徴>Tezosの特徴</a></li><li><a href=#dpos>DPoS</a><ul><li><a href=#proof-of-stake>Proof-of-Stake</a></li><li><a href=#delegated-pos-委任pos>Delegated PoS (委任PoS)</a></li><li><a href=#liquid-pos-tezos>Liquid PoS (Tezos)</a></li><li><a href=#liquid-democracy-posとdposの間の概念>Liquid Democracy (PoSとDPoSの間の概念)</a></li></ul></li><li><a href=#オンチェーンガバナンス>オンチェーンガバナンス</a><ul><li><a href=#ガバナンスとは>ガバナンスとは</a></li><li><a href=#ハードフォークのリスク>ハードフォークのリスク</a></li><li><a href=#オンチェーンガバナンス-1>オンチェーン・ガバナンス</a></li><li><a href=#変更できる部分のプロトコルの分離>変更できる部分のプロトコルの分離</a></li><li><a href=#tezosのオンチェーンガバナンス>Tezosのオンチェーンガバナンス</a></li><li><a href=#初めての修正>初めての修正</a></li><li><a href=#初めての修正後の課題>初めての修正後の課題</a></li></ul></li><li><a href=#tezosと安全性-形式検証>Tezosと安全性, 形式検証</a><ul><li><a href=#形式検証>形式検証</a></li><li><a href=#tezosのスマートコントラクト>Tezosのスマートコントラクト</a></li><li><a href=#ユースケース>ユースケース</a></li><li><a href=#これから>これから</a></li></ul></li></ul></li><li><a href=#ブロックチェーンとは>ブロックチェーンとは</a><ul><li><a href=#形式検証-1>形式検証</a></li><li><a href=#tezosの流れ>Tezosの流れ</a></li><li><a href=#tezosのツール>Tezosのツール</a></li></ul></li></ul></nav></aside></header><article class=markdown><h1><a href=/posts/tezos-hands-on/>Tezosハンズオン</a></h1><h5>Jun 15, 2019</h5><div><a href=/categories/meetup/>meetup</a>,
<a href=/categories/Blockchain/>Blockchain</a></div><div><a href=/tags/Hands-on/>Hands-on</a>,
<a href=/tags/Tezos/>Tezos</a></div><p><h2 id=tezosとは>Tezosとは</h2><ul><li>第3世代のブロックチェーン</li><li>2018-09: Mainnet開始</li><li>ペーパーで約束されたものをほぼ実装した.</li><li>財団がRandDにお金を出してる.</li><li>PoS</li></ul><h2 id=tezosの特徴>Tezosの特徴</h2><ul><li>プロトコルはステークホルダーの物というのが第一の信条.<ul><li>LPos: Liqid Proof of Stake</li><li>オンチェーン・ガバナンス: 自己修正投票</li></ul></li><li>安全第一<ul><li>形式検証を用いている</li></ul></li></ul><h2 id=dpos>DPoS</h2><h3 id=proof-of-stake>Proof-of-Stake</h3><ul><li>トークン所有量に応じたブロック生成権が与えらえる.<ul><li>ASICが必要ない</li><li>手数料が高騰しない</li><li>環境に良い</li></ul></li><li>トークンを所有していないマイナーからプロトコルをステークホルダーに解放する.</li></ul><h3 id=delegated-pos-委任pos>Delegated PoS (委任PoS)</h3><ul><li>ステーク投票により選ばれた少数のノードにブロック生成権を与える.</li><li>権利を投票に使う.</li><li>EOSが代表格</li><li>利点<ul><li>PC持ってないステークホルダーも間接的にブロック生成に参加できる.</li><li>ノード数を減らすことで合意形成効率を上げられる.</li></ul></li><li>欠点<ul><li>過度にノード数を減らすと分散性・安全性を損なう.</li></ul></li></ul><h3 id=liquid-pos-tezos>Liquid PoS (Tezos)</h3><ul><li>選ばれた少数のノードではなく, 誰でもベーキング(ブロック生成)できる.</li><li>マーケティングにより, マイニングとは言わずにベーキングと言う.</li><li>ベーカリー(ベーキングの委任を受ける業者のこと), ベーキング権(マイニングする権利), ベーキング(マイニングのこと)という.</li><li>マイニングを少数ノードに牛耳られることなくステークホルダーに還元するためにLPoSを採用している.</li><li>現在450〜500くらいのノードがある.</li><li>スピードは狙ってない.</li><li>現在は30〜40TPSくらい.</li></ul><h3 id=liquid-democracy-posとdposの間の概念>Liquid Democracy (PoSとDPoSの間の概念)</h3><ul><li>直接民主制(PoS)から代表民主制(DPos)へ.</li><li>Liquid Democracy(LPoS)は直接民主制と代表民主制の中間の概念.</li><li>Liquid Democracy(LPoS)は議題ごとに代議員を選ぶことができる.</li><li>TezosはLiquid Democracy(LPoS)を採用している.</li></ul><h2 id=オンチェーンガバナンス>オンチェーンガバナンス</h2><h3 id=ガバナンスとは>ガバナンスとは</h3><ul><li>どうやって改良(フォーク)していくかの手続きのこと.<ul><li>ソフトフォーク(後方互換)</li><li>ハードフォーク(後方非互換)</li></ul></li></ul><h3 id=ハードフォークのリスク>ハードフォークのリスク</h3><ul><li>プロトコルのハードフォークはコミュニティのハードフォークも生む危険性がある.<ul><li>DAOによるEthereumとEthereum Classicの分裂</li><li>Bitcoin Cashのハードフォークとハッシュ戦争</li></ul></li><li>ガバナンスの目標<ul><li>どうコミュニティの分裂を避け, プロトコルをスムーズに進化させていくか.</li></ul></li></ul><h3 id=オンチェーンガバナンス-1>オンチェーン・ガバナンス</h3><ul><li>プロトコルをスムーズに進化せていくための手法.</li><li>フォーク手続きがプロトコルに実装され, 過程が全てチェーン上に記録される.<ul><li>プロトコル更新の提案</li><li>更新のテスト</li><li>採用投票</li><li>採用後の自動移行</li></ul></li><li>プロトコルの所有権を開発者やカリスマからステークホルダーの物とした.<ul><li>けれども投票で独裁化することできる.</li><li>プロトコル自体も投票で決めることができるので.</li></ul></li><li>危ないっちゃ危ない.</li></ul><h3 id=変更できる部分のプロトコルの分離>変更できる部分のプロトコルの分離</h3><ul><li>シェル(ハード寄りの部分)<ul><li>オンチェーン・ガバナンスの対象外</li><li>ネットワーク通信, ストレージ等の実装</li></ul></li><li>プロトコル(脳みその部分)<ul><li>オンチェーン・ガバナンスの対象</li><li>トランザクションの意味やコンセンサスを定義</li></ul></li></ul><h3 id=tezosのオンチェーンガバナンス>Tezosのオンチェーンガバナンス</h3><ul><li>プロトコル変更をコードとして提案, P2Pで配布する.<ul><li>第1回投票: 提案の1つを選択</li><li>第2回投票: テストするか投票</li><li>テストが本番と並行して動かされる</li><li>第3回投票:</li></ul></li></ul><h3 id=初めての修正>初めての修正</h3><ul><li>Gas Limitの変更</li><li>ステーキング参加条件の緩和(10000 -> 8000)</li><li>名称はAthenes(アテネ)</li></ul><h3 id=初めての修正後の課題>初めての修正後の課題</h3><ul><li>ノードの自動更新は成功したが, サードパーティのウォレットなどの一部が更新を知らなかった.</li><li>最短で3カ月ごとに更新される.<ul><li>これは割と忙しい.</li></ul></li></ul><h2 id=tezosと安全性-形式検証>Tezosと安全性, 形式検証</h2><h3 id=形式検証>形式検証</h3><ul><li>安全性を数理的に完全に証明する.<ul><li>検証に適した関数型言語OCamlを採用</li><li>型システム, モデル検査, 定理証明を採用</li><li>以上をすべての分野に採用する</li><li>ノード実装, スマートコントラクト</li></ul></li></ul><h3 id=tezosのスマートコントラクト>Tezosのスマートコントラクト</h3><ul><li>安全性を優先したデザイン</li><li>VM: Michelson<ul><li>静的型付け, 純粋関数型のスタックVM</li><li>人間でも一応読み書きできる</li></ul></li><li>高級言語もある<ul><li>Ligo, fi</li></ul></li></ul><h3 id=ユースケース>ユースケース</h3><ul><li>Elevated Returns: 不動産のトークン化の基盤<ul><li>不動産の証券化を行う.</li></ul></li><li>Tezsure: ブロックチェーンを用いた簡易保険</li><li>Chorus Mobility: 自動運転車間の交通優先権取引</li><li>Viaz: P2P funding platform</li><li>Decet: 農作物先物取引市場</li><li>etc&mldr;</li></ul><h3 id=これから>これから</h3><ul><li>エコシステム<ul><li>ディスク使用量の改善</li><li>改良, 検証された高レベル言語, 形式検証ツール</li></ul></li><li>プロトコル改訂<ul><li>BFTコンセンサスの導入, PVSSによる乱数生成</li><li>zk-SNARKSの採用</li></ul></li><li>セカンドレイヤー</li><li>Marigold(:=plasma)</li></ul><h1 id=ブロックチェーンとは>ブロックチェーンとは</h1><ul><li>台帳方式</li><li>分散環境</li><li>開かれたネットワーク<ul><li>Paxosは閉じたネットワークでは合意形成ができる.</li><li>開かれたネットワークではSybil攻撃(成り済まし攻撃)があるのが問題.</li><li>それを解決したのがSatoshi Nakamoto.</li><li>ネットワークとは無関係の資源占有による制限を取り入れた. (PoW, PoS etc)</li></ul></li><li>トークン<ul><li>分散データベースを作りたかったけど, Sybil攻撃を防ぐために資源占有を促すためのインセンティブとして仮想通貨(トークン)が生まれた.</li></ul></li><li>スマートコントラクト<ul><li>安全性が超大事.</li></ul></li></ul><h2 id=形式検証-1>形式検証</h2><ul><li>数理的にプログラムが好ましい性質を持っていることを証明する.</li><li>静的型付け</li><li>モデル検査</li><li>定理証明</li><li>産業的には, クリティカルシステムに使われてきた.<ul><li>航空宇宙産業</li><li>原子力発電</li></ul></li></ul><h2 id=tezosの流れ>Tezosの流れ</h2><ul><li>やりたいことをアカウント操作にする.</li><li>操作をP2Pネットワークに放流する.</li><li>ベイカーが操作を取り込んでブロックを作る.</li></ul><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>docker pull furuse/tezos-hands-on:2019-06-15
docker run furuse/tezos-hands-on:2019-06-15 curl -I https://tezos.com
git clone https://gitlab.com/dailambda/docker-tezos-hands-on
<span style=color:#b58900>cd</span> docker-tezos-hands-on
git checkout master
git pull
./tezos-client get balance <span style=color:#719e07>for</span> alice
./tezos-client add address jun tz1ZD7QcE3yWfj6v8pwfbKTgdb3HU1q8EMM4
./tezos-client get balance <span style=color:#719e07>for</span> jun
./tezos-client list known addresses
./tezos-client transfer <span style=color:#2aa198>111</span> from alice to jun
./tezos-client list known contracts
</code></pre></div><h2 id=tezosのツール>Tezosのツール</h2><ul><li><a href=http://node1.nyc.tezos.org.sg>http://node1.nyc.tezos.org.sg</a>:8001</li><li><a href=https://fi-code.com>https://fi-code.com</a></li></ul></p></article><footer class=book-footer><div class="flex justify-between"><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/commit/cd95b82de535f672f99cd6802faa4f1708427ccd title="Last modified by solareenlo | Mar 23, 2020" target=_blank rel=noopener><img src=/svg/calendar.svg class=book-icon alt=Calendar>
<span>Mar 23, 2020</span></a></div><div><a class="flex align-center" href=https://github.com/solareenlo/blog-hugo/edit/master/content/posts/tezos-hands-on.md target=_blank rel=noopener><img src=/svg/edit.svg class=book-icon alt=Edit>
<span>Edit this page</span></a></div></div></footer><div class=book-comments></div><label for=menu-control class="hidden book-menu-overlay"></label></div><aside class=book-toc><nav id=TableOfContents><ul><li><ul><li><a href=#tezosとは>Tezosとは</a></li><li><a href=#tezosの特徴>Tezosの特徴</a></li><li><a href=#dpos>DPoS</a><ul><li><a href=#proof-of-stake>Proof-of-Stake</a></li><li><a href=#delegated-pos-委任pos>Delegated PoS (委任PoS)</a></li><li><a href=#liquid-pos-tezos>Liquid PoS (Tezos)</a></li><li><a href=#liquid-democracy-posとdposの間の概念>Liquid Democracy (PoSとDPoSの間の概念)</a></li></ul></li><li><a href=#オンチェーンガバナンス>オンチェーンガバナンス</a><ul><li><a href=#ガバナンスとは>ガバナンスとは</a></li><li><a href=#ハードフォークのリスク>ハードフォークのリスク</a></li><li><a href=#オンチェーンガバナンス-1>オンチェーン・ガバナンス</a></li><li><a href=#変更できる部分のプロトコルの分離>変更できる部分のプロトコルの分離</a></li><li><a href=#tezosのオンチェーンガバナンス>Tezosのオンチェーンガバナンス</a></li><li><a href=#初めての修正>初めての修正</a></li><li><a href=#初めての修正後の課題>初めての修正後の課題</a></li></ul></li><li><a href=#tezosと安全性-形式検証>Tezosと安全性, 形式検証</a><ul><li><a href=#形式検証>形式検証</a></li><li><a href=#tezosのスマートコントラクト>Tezosのスマートコントラクト</a></li><li><a href=#ユースケース>ユースケース</a></li><li><a href=#これから>これから</a></li></ul></li></ul></li><li><a href=#ブロックチェーンとは>ブロックチェーンとは</a><ul><li><a href=#形式検証-1>形式検証</a></li><li><a href=#tezosの流れ>Tezosの流れ</a></li><li><a href=#tezosのツール>Tezosのツール</a></li></ul></li></ul></nav></aside></main></body></html>