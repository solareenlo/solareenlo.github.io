<!DOCTYPE html>





<html lang="en">

<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  
    
    Tezosハンズオン
  
 | solareenlo</title>



<link rel="stylesheet" href="/book.min.3de096a39acf7bbc723413548895b355b1d215f088be625b1dc7c81610b3f1cf.css">


<link rel="icon" href="/favicon.png" type="image/x-icon">


<!--
Made with Book Theme
https://github.com/alex-shpak/hugo-book
-->

  
</head>

<body>
  <input type="checkbox" style="display: none" id="menu-control" />
  <main class="flex container">
    <aside class="book-menu fixed">
      <nav>
<h2 class="book-brand">
  <a href="https://solareenlo.com/">solareenlo</a>
</h2>



    
  
  
  

  <style>
  nav ul a[href$="\2fposts\2ftezos-hands-on\2f "] {
      color: #004ed0;
  }
  </style>

<ul>
<li><a href="/"><strong>はじめに</strong></a></li>
<li><a href="/posts/"><strong>Blog</strong></a></li>
<li><a href="/docs/programming/"><strong>Programming</strong></a>

<ul>
<li><a href="/docs/terminal/">Terminal</a></li>
<li><a href="/docs/command/">Command</a></li>
<li><a href="/docs/sed/">sed</a></li>
<li><a href="/docs/shell-script/">Shell Script</a></li>
<li><a href="/docs/vim/">Vim</a></li>
<li><a href="/docs/git/">Git</a></li>
<li><a href="/docs/github/">GitHub</a></li>
<li><a href="/docs/linter-formatter/">Linter/Formatter</a></li>
<li><a href="/docs/test/">Test</a></li>
</ul></li>
<li><a href="/docs/programming-language/"><strong>Programming Language</strong></a>

<ul>
<li><a href="/docs/c/">C</a></li>
<li><a href="/docs/rust/">Rust</a></li>
<li><a href="/docs/javascript/">JavaScript</a></li>
<li><a href="/docs/css/">CSS</a></li>
<li><a href="/docs/nodejs/">Node.js</a></li>
<li><a href="/docs/npm/">npm</a></li>
<li><a href="/docs/typescript/">TypeScript</a></li>
<li><a href="/docs/angular/">Angular</a></li>
<li><a href="/docs/react/">React</a></li>
<li><a href="/docs/react-static/">React Static</a></li>
<li><a href="/docs/haskell/">Haskell</a></li>
<li><a href="/docs/hugo/">Hugo</a></li>
</ul></li>
<li><a href="/docs/latex/"><strong>LaTeX</strong></a></li>
<li><a href="/docs/vps/"><strong>VPS</strong></a>

<ul>
<li><a href="/docs/ssh/">SSH</a></li>
<li><a href="/docs/ubuntu/">Ubuntu</a></li>
<li><a href="/docs/alpine-linux/">Alpine Linux</a></li>
</ul></li>
<li><a href="/docs/db/"><strong>DB</strong></a>

<ul>
<li><a href="/docs/mysql/">MySQL</a></li>
<li><a href="/docs/mongodb/">MongoDB</a></li>
<li><a href="/docs/redis/">Redis</a></li>
</ul></li>
<li><a href="/docs/cloud/"><strong>Cloud</strong></a>

<ul>
<li><a href="/docs/aws/">AWS</a></li>
<li><a href="/docs/gcp/">GCP</a></li>
<li><a href="/docs/firebase/">Firebase</a></li>
<li><a href="/docs/zeit-now/">ZEIT Now</a></li>
</ul></li>
<li><a href="/docs/ci-cd/"><strong>CI/CD</strong></a>

<ul>
<li><a href="/docs/jenkins/">Jenkins</a></li>
<li><a href="/docs/travis-ci/">Travis CI</a></li>
<li><a href="/docs/circleci/">CircleCI</a></li>
</ul></li>
<li><a href="/docs/container/"><strong>Container</strong></a>

<ul>
<li><a href="/docs/docker1/">Docker1</a></li>
<li><a href="/docs/docker2/">Docker2</a></li>
<li><a href="/docs/docker-hub/">Docker Hub</a></li>
<li><a href="/docs/docker-compose/">Docker Compose</a></li>
<li><a href="/docs/kubernetes/">Kubernetes</a></li>
</ul></li>
<li><a href="/docs/crypto/"><strong>Crypto</strong></a>

<ul>
<li><a href="/docs/blockchain/">Blockchain</a></li>
<li><a href="/docs/bitcoin/">Bitcoin</a></li>
<li><a href="/docs/ethereum/">Ethereum</a></li>
<li><a href="/docs/iota/">IOTA</a></li>
<li><a href="/docs/nem/">NEM</a></li>
<li><a href="/docs/substrate/">Substrate</a></li>
<li><a href="/docs/white-paper/">White Paper</a></li>
<li><a href="/docs/crypto-docs/">Docs</a></li>
</ul></li>
</ul>





</nav>


  
<script>
(function() {
  var menu = document.querySelector('aside.book-menu nav')
  addEventListener('beforeunload', function(event) {
    localStorage.setItem('menu.scrollTop', menu.scrollTop)
  });
  menu.scrollTop = localStorage.getItem('menu.scrollTop')
})()
</script>



    </aside>

    <div class="book-posts">
      <header class="align-center justify-between book-header">
  <label for="menu-control">
    <img src="/svg/menu.svg" alt="Menu" />
  </label>
  <strong>
  
    
    Tezosハンズオン
  
</strong>
</header>

      

<header class="markdown">
  <h1>Tezosハンズオン</h1>
  <h5>
    <strong>Jun 15, 2019</strong>
  </h5>
</header>
<article class="markdown">

<h2 id="tezosとは">Tezosとは</h2>

<ul>
<li>第3世代のブロックチェーン</li>
<li>2018-09: Mainnet開始</li>
<li>ペーパーで約束されたものをほぼ実装した.</li>
<li>財団がRandDにお金を出してる.</li>
<li>PoS</li>
</ul>

<h2 id="tezosの特徴">Tezosの特徴</h2>

<ul>
<li>プロトコルはステークホルダーの物というのが第一の信条.

<ul>
<li>LPos: Liqid Proof of Stake</li>
<li>オンチェーン・ガバナンス: 自己修正投票</li>
</ul></li>
<li>安全第一

<ul>
<li>形式検証を用いている</li>
</ul></li>
</ul>

<h2 id="dpos">DPoS</h2>

<h3 id="proof-of-stake">Proof-of-Stake</h3>

<ul>
<li>トークン所有量に応じたブロック生成権が与えらえる.

<ul>
<li>ASICが必要ない</li>
<li>手数料が高騰しない</li>
<li>環境に良い</li>
</ul></li>
<li>トークンを所有していないマイナーからプロトコルをステークホルダーに解放する.</li>
</ul>

<h3 id="delegated-pos-委任pos">Delegated PoS (委任PoS)</h3>

<ul>
<li>ステーク投票により選ばれた少数のノードにブロック生成権を与える.</li>
<li>権利を投票に使う.</li>
<li>EOSが代表格</li>
<li>利点

<ul>
<li>PC持ってないステークホルダーも間接的にブロック生成に参加できる.</li>
<li>ノード数を減らすことで合意形成効率を上げられる.</li>
</ul></li>
<li>欠点

<ul>
<li>過度にノード数を減らすと分散性・安全性を損なう.</li>
</ul></li>
</ul>

<h3 id="liquid-pos-tezos">Liquid PoS (Tezos)</h3>

<ul>
<li>選ばれた少数のノードではなく, 誰でもベーキング(ブロック生成)できる.</li>
<li>マーケティングにより, マイニングとは言わずにベーキングと言う.</li>
<li>ベーカリー(ベーキングの委任を受ける業者のこと), ベーキング権(マイニングする権利), ベーキング(マイニングのこと)という.</li>
<li>マイニングを少数ノードに牛耳られることなくステークホルダーに還元するためにLPoSを採用している.</li>
<li>現在450〜500くらいのノードがある.</li>
<li>スピードは狙ってない.</li>
<li>現在は30〜40TPSくらい.</li>
</ul>

<h3 id="liquid-democracy-posとdposの間の概念">Liquid Democracy (PoSとDPoSの間の概念)</h3>

<ul>
<li>直接民主制(PoS)から代表民主制(DPos)へ.</li>
<li>Liquid Democracy(LPoS)は直接民主制と代表民主制の中間の概念.</li>
<li>Liquid Democracy(LPoS)は議題ごとに代議員を選ぶことができる.</li>
<li>TezosはLiquid Democracy(LPoS)を採用している.</li>
</ul>

<h2 id="オンチェーンガバナンス">オンチェーンガバナンス</h2>

<h3 id="ガバナンスとは">ガバナンスとは</h3>

<ul>
<li>どうやって改良(フォーク)していくかの手続きのこと.

<ul>
<li>ソフトフォーク(後方互換)</li>
<li>ハードフォーク(後方非互換)</li>
</ul></li>
</ul>

<h3 id="ハードフォークのリスク">ハードフォークのリスク</h3>

<ul>
<li>プロトコルのハードフォークはコミュニティのハードフォークも生む危険性がある.

<ul>
<li>DAOによるEthereumとEthereum Classicの分裂</li>
<li>Bitcoin Cashのハードフォークとハッシュ戦争</li>
</ul></li>
<li>ガバナンスの目標

<ul>
<li>どうコミュニティの分裂を避け, プロトコルをスムーズに進化させていくか.</li>
</ul></li>
</ul>

<h3 id="オンチェーン-ガバナンス">オンチェーン・ガバナンス</h3>

<ul>
<li>プロトコルをスムーズに進化せていくための手法.</li>
<li>フォーク手続きがプロトコルに実装され, 過程が全てチェーン上に記録される.

<ul>
<li>プロトコル更新の提案</li>
<li>更新のテスト</li>
<li>採用投票</li>
<li>採用後の自動移行</li>
</ul></li>
<li>プロトコルの所有権を開発者やカリスマからステークホルダーの物とした.

<ul>
<li>けれども投票で独裁化することできる.</li>
<li>プロトコル自体も投票で決めることができるので.</li>
</ul></li>
<li>危ないっちゃ危ない.</li>
</ul>

<h3 id="変更できる部分のプロトコルの分離">変更できる部分のプロトコルの分離</h3>

<ul>
<li>シェル(ハード寄りの部分)

<ul>
<li>オンチェーン・ガバナンスの対象外</li>
<li>ネットワーク通信, ストレージ等の実装</li>
</ul></li>
<li>プロトコル(脳みその部分)

<ul>
<li>オンチェーン・ガバナンスの対象</li>
<li>トランザクションの意味やコンセンサスを定義</li>
</ul></li>
</ul>

<h3 id="tezosのオンチェーンガバナンス">Tezosのオンチェーンガバナンス</h3>

<ul>
<li>プロトコル変更をコードとして提案, P2Pで配布する.

<ul>
<li>第1回投票: 提案の1つを選択</li>
<li>第2回投票: テストするか投票</li>
<li>テストが本番と並行して動かされる</li>
<li>第3回投票:</li>
</ul></li>
</ul>

<h3 id="初めての修正">初めての修正</h3>

<ul>
<li>Gas Limitの変更</li>
<li>ステーキング参加条件の緩和(10000 -&gt; 8000)</li>
<li>名称はAthenes(アテネ)</li>
</ul>

<h3 id="初めての修正後の課題">初めての修正後の課題</h3>

<ul>
<li>ノードの自動更新は成功したが, サードパーティのウォレットなどの一部が更新を知らなかった.</li>
<li>最短で3カ月ごとに更新される.

<ul>
<li>これは割と忙しい.</li>
</ul></li>
</ul>

<h2 id="tezosと安全性-形式検証">Tezosと安全性, 形式検証</h2>

<h3 id="形式検証">形式検証</h3>

<ul>
<li>安全性を数理的に完全に証明する.

<ul>
<li>検証に適した関数型言語OCamlを採用</li>
<li>型システム, モデル検査, 定理証明を採用</li>
<li>以上をすべての分野に採用する</li>
<li>ノード実装, スマートコントラクト</li>
</ul></li>
</ul>

<h3 id="tezosのスマートコントラクト">Tezosのスマートコントラクト</h3>

<ul>
<li>安全性を優先したデザイン</li>
<li>VM: Michelson

<ul>
<li>静的型付け, 純粋関数型のスタックVM</li>
<li>人間でも一応読み書きできる</li>
</ul></li>
<li>高級言語もある

<ul>
<li>Ligo, fi</li>
</ul></li>
</ul>

<h3 id="ユースケース">ユースケース</h3>

<ul>
<li>Elevated Returns: 不動産のトークン化の基盤

<ul>
<li>不動産の証券化を行う.</li>
</ul></li>
<li>Tezsure: ブロックチェーンを用いた簡易保険</li>
<li>Chorus Mobility: 自動運転車間の交通優先権取引</li>
<li>Viaz: P2P funding platform</li>
<li>Decet: 農作物先物取引市場</li>
<li>etc&hellip;</li>
</ul>

<h3 id="これから">これから</h3>

<ul>
<li>エコシステム

<ul>
<li>ディスク使用量の改善</li>
<li>改良, 検証された高レベル言語, 形式検証ツール</li>
</ul></li>
<li>プロトコル改訂

<ul>
<li>BFTコンセンサスの導入, PVSSによる乱数生成</li>
<li>zk-SNARKSの採用</li>
</ul></li>
<li>セカンドレイヤー</li>
<li>Marigold(:=plasma)</li>
</ul>

<h1 id="ブロックチェーンとは">ブロックチェーンとは</h1>

<ul>
<li>台帳方式</li>
<li>分散環境</li>
<li>開かれたネットワーク

<ul>
<li>Paxosは閉じたネットワークでは合意形成ができる.</li>
<li>開かれたネットワークではSybil攻撃(成り済まし攻撃)があるのが問題.</li>
<li>それを解決したのがSatoshi Nakamoto.</li>
<li>ネットワークとは無関係の資源占有による制限を取り入れた. (PoW, PoS etc)</li>
</ul></li>
<li>トークン

<ul>
<li>分散データベースを作りたかったけど, Sybil攻撃を防ぐために資源占有を促すためのインセンティブとして仮想通貨(トークン)が生まれた.</li>
</ul></li>
<li>スマートコントラクト

<ul>
<li>安全性が超大事.</li>
</ul></li>
</ul>

<h2 id="形式検証-1">形式検証</h2>

<ul>
<li>数理的にプログラムが好ましい性質を持っていることを証明する.</li>
<li>静的型付け</li>
<li>モデル検査</li>
<li>定理証明</li>
<li>産業的には, クリティカルシステムに使われてきた.

<ul>
<li>航空宇宙産業</li>
<li>原子力発電</li>
</ul></li>
</ul>

<h2 id="tezosの流れ">Tezosの流れ</h2>

<ul>
<li>やりたいことをアカウント操作にする.</li>
<li>操作をP2Pネットワークに放流する.</li>
<li>ベイカーが操作を取り込んでブロックを作る.</li>
</ul>
<div class="highlight"><pre style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash">docker pull furuse/tezos-hands-on:2019-06-15
docker run furuse/tezos-hands-on:2019-06-15 curl -I https://tezos.com
git clone https://gitlab.com/dailambda/docker-tezos-hands-on
<span style="color:#b58900">cd</span> docker-tezos-hands-on
git checkout master
git pull
./tezos-client get balance <span style="color:#719e07">for</span> alice
./tezos-client add address jun tz1ZD7QcE3yWfj6v8pwfbKTgdb3HU1q8EMM4
./tezos-client get balance <span style="color:#719e07">for</span> jun
./tezos-client list known addresses
./tezos-client transfer <span style="color:#2aa198">111</span> from alice to jun
./tezos-client list known contracts</code></pre></div>
<h2 id="tezosのツール">Tezosのツール</h2>

<ul>
<li><a href="http://node1.nyc.tezos.org.sg:8001">http://node1.nyc.tezos.org.sg:8001</a></li>
<li><a href="https://fi-code.com">https://fi-code.com</a></li>
</ul>
</article>

      
    </div>
  </main>

  
  
</body>

</html>
